webpackJsonp([42],{505:function(e,i,t){function a(e){t(799)}var n=t(0)(t(676),t(927),a,"data-v-4d48962a",null);e.exports=n.exports},676:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t(15),n=t.n(a),o=t(14),s=t(3),m=t(20),l=t.n(m),r=t(49),c=t.n(r),x=t(74),u=t.n(x),_=t(76),d=t.n(_),h=t(28),p=t(9);i.default={name:"examineopinion",components:{Group:l.a,Cell:c.a,XTextarea:u.a,Selector:d.a},data:function(){return{opinion:"",examine_role_id:"",examine_name:"",examine_custom:!0,examine_flow:"1",examine_flow_data:[{key:"1",value:"下一审批人"},{key:"2",value:"审批结束"}]}},beforeDestroy:function(){h.a.$off("saveDone")},beforeRouteLeave:function(e,i,t){"selectlist"===e.name?(h.a.$on("selectedRelateItem",function(e){this.handleSelectedInfo(e)}.bind(this)),this.$store.commit("updateDetailView",{type:"examineopinion",opinion:this.opinion,examine_role_id:this.examine_role_id,examine_name:this.examine_name,examine_custom:this.examine_custom,examine_flow:this.examine_flow,id:this.$route.params.id,action:this.$route.params.action})):this.$store.commit("updateDetailView",""),t()},beforeRouteEnter:function(e,i,t){"selectlist"===i.name&&h.a.$off("selectedRelateItem"),t()},computed:n()({placeholder:function(){return"1"===this.$route.params.action?"填写确定理由（非必填）":"填写驳回理由（非必填）"}},t.i(p.b)(["detailView","detail","examineList"])),mounted:function(){h.a.$on("saveDone",function(){this.saveInfos()}.bind(this)),"1"===this.$route.params.action&&(""!==this.detailView&&"examineopinion"===this.detailView.type&&"1"===this.detailView.action&&this.detailView.id===this.$route.params.id?(this.opinion=this.detailView.opinion,this.examine_role_id=this.detailView.examine_role_id,this.examine_name=this.detailView.examine_name,this.examine_custom=this.detailView.examine_custom,this.examine_flow=this.detailView.examine_flow):this.getExamineRole())},methods:{getExamineRole:function(){t.i(o.b)("POST","m=examine&a=examineStatus",{type:this.$route.params.type,id:this.$route.params.id},this,function(e,i,t){t&&("0"===e.option?i.examine_custom=!1:"1"===e.option&&(i.examine_custom=!0,e.examine_role.role_id?(i.examine_role_id=e.examine_role.role_id,i.examine_name=e.examine_role.full_name):(i.examine_flow="2",i.examine_flow_data=[{key:"2",value:"审批结束"}])))})},saveInfos:function(){var e={};if(e.id=this.$route.params.id,e.is_agree=this.$route.params.action,"1"===e.is_agree)if("2"===this.examine_flow)e.examine_status="2";else{if(t.i(s.d)(this.examine_role_id))return void this.$vux.toast.text("请选择下一审批人","top");e.examine_role_id=this.examine_role_id}else"2"===e.is_agree&&(e.examine_status="2");e.opinion=this.opinion,t.i(o.b)("POST","m=examine&a=add_examine",e,this,function(e,i,t){t&&(i.$vux.toast.text(e.info,"top"),i.detail.refreshCheck=!0,i.$store.commit("updateDetail",i.detail.refreshCheck),i.updateMainList(),i.$router.go(-1))})},updateMainList:function(){1===this.examineList.examine_type?this.examineList.me_examine.refresh=!0:2===this.examineList.examine_type?this.examineList.examined.refresh=!0:3===this.examineList.examine_type&&(this.examineList.create.refresh=!0),this.$store.commit("updateExamineList",this.examineList)},handleSelectedInfo:function(e){"3"===e.type&&(this.detailView.examine_name=e.item.user_name,this.detailView.examine_role_id=e.item.role_id,this.$store.commit("updateDetailView",this.detailView))},enterExamineList:function(e){e&&this.$router.push({name:"selectlist",params:{id:"-1",type:"examine",selecttype:"3",section:"-1",row:"-1"}})}}}},733:function(e,i,t){i=e.exports=t(73)(!0),i.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ExamineOpinion.vue",sourceRoot:""}])},799:function(e,i,t){var a=t(733);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(476)("0629ba78",a,!0)},927:function(e,i){e.exports={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticStyle:{"background-color":"white",height:"100%"}},[t("x-textarea",{attrs:{max:200,placeholder:e.placeholder,"show-counter":!1,height:200,rows:8,cols:30},model:{value:e.opinion,callback:function(i){e.opinion=i},expression:"opinion"}}),e._v(" "),"1"===this.$route.params.action?t("group",[t("selector",{attrs:{options:e.examine_flow_data,direction:"rtl"},model:{value:e.examine_flow,callback:function(i){e.examine_flow=i},expression:"examine_flow"}},[t("p",{staticStyle:{"margin-left":"15px"},slot:"label"},[e._v("审批流程")])]),e._v(" "),"1"===e.examine_flow?t("cell",{attrs:{title:"下一审批人",value:e.examine_name,"is-link":!e.examine_custom},nativeOn:{click:function(i){e.enterExamineList(!e.examine_custom)}}}):e._e()],1):e._e()],1)},staticRenderFns:[]}}});
//# sourceMappingURL=42.4ce2078d603fdb2b4db8.js.map