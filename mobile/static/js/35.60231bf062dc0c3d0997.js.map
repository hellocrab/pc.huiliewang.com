{"version":3,"sources":["webpack:///static/js/35.60231bf062dc0c3d0997.js","webpack:///./src/components/office/page/MapChoice.vue?031a","webpack:///./src/assets/sign_loc.png?f750**","webpack:///./src/components/office/page/MapChoice.vue","webpack:///./src/components/office/page/MapChoice.vue?a55c","webpack:///./src/components/office/page/MapChoice.vue?9bf9","webpack:///./src/components/office/page/MapChoice.vue?7c9f"],"names":["webpackJsonp","518","module","exports","__webpack_require__","injectStyle","ssrContext","Component","558","689","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__","__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue___default","__WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue__","__WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue___default","__WEBPACK_IMPORTED_MODULE_5_vuex__","__WEBPACK_IMPORTED_MODULE_6__js_Event_js__","__WEBPACK_IMPORTED_MODULE_7__js_enum_js__","__WEBPACK_IMPORTED_MODULE_8__config_js__","name","components","Group","a","Cell","data","map","itemlist","addressItem","computed","i","beforeDestroy","$off","beforeRouteLeave","to","from","next","this","detail","address","$store","commit","checkSetInfo","mounted","$on","searchtext","searchContent","bind","type","SignIn","BMap","Map","centerAndZoom","point","disableDragging","disableDoubleClickZoom","enableScrollWheelZoom","enableContinuousZoom","addMarkerLabel","searchMap","Point","lng","lat","self","$vux","loading","show","text","isAndroid","successCallback","hide","parseFloat","longitude","latitude","failedCallback","toast","baidu_location","getCurrentPosition","isIOS","onError","error","onSuccess","position","coords","convertor","Convertor","pointArr","push","translate","status","newpoint","points","navigator","geolocation","methods","u","userAgent","indexOf","match","getCity","geoc","Geocoder","getLocation","rs","addressComponents","surroundingPois","length","clearOverlays","myIcon","Icon","Size","marker2","Marker","icon","addOverlay","selected","title","choicePositon","item","wktype","mPoint","key","options","onSearchComplete","results","local","getStatus","BMAP_STATUS_SUCCESS","getCurrentNumPois","getPoi","pageCapacity","LocalSearch","searchInBounds","getBounds","content","718","version","sources","names","mappings","file","sourceRoot","784","locals","912","render","_vm","_h","$createElement","_c","_self","staticStyle","height","width","overflow","attrs","id","_v","gutter","_l","index","inline-desc","nativeOn","click","$event","padding","src","slot","_e","staticRenderFns"],"mappings":"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","file":"static/js/35.60231bf062dc0c3d0997.js","sourcesContent":["webpackJsonp([35],{\n\n/***/ 518:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(784)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(689),\n  /* template */\n  __webpack_require__(912),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-1e0bcf38\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 558:\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAADQ0lEQVRoQ+2Zz1UbQQzGJa0fHOMSoIKYCgIVBCqAVBC4ZM0JcwLnAqkAUgGmAkwHpoKQCmKOycPz8XaNCc9/dmSPxviZ3ZuftTP66dNIM7NM7+zhd8ZLJfCyK14qXCq8ZBEoU3rJBB3BKRUuFV6yCMwlpfGdag6yC6DGTFUirvXjiA5AXSa0ROiWv1EndnyjAj+e0B4zHxHzmgYEQDsBjvmQ2hr7WWyiAOOE1pzw1X8lp3MtB1/FDh9Qd7o3/dbmwGjStiO+IOKqf/oiC3SFsWWd5qbAOKFNJ3ITBvr6bXtoM+B+YeKbcGWHw4WuOGzwId1bBNIM+LHJbSb+ZOHUCDLQrtSxZTG2CXBejUUuLByaNIaQ2+GUWqFzmAD3TrlDzB9DnSl+H50kxUboHMHA/RYkv1SOAA/EaIijDiXU7fWoxsz72mCJc+uhazkYuNekfSI58wIDd7KKzXG9tdeUSyLa9Y5B7iBJ6dxvN9kiHPhUzonpq88JYbcxqafijKruL7e9SoN+JHW375ur6P9gYE11BuG2kmKzyJFeUxpEdFS4FVGM4wvGXIBJoYxm06IJXHRgzfrTOKpsbT+T1O35oOKmtKoHoysrWC86DKiWhnNfKoeUFbiZn+CUzgvOP/nj8wCEViXFzjg7lbrAg6xiLfQEFQycAWjSug+KjgANrtN1/qvfw7N2lBUs3xOcztkEJsBTbT58WBP+t9h0mAFnAz2ecouZP8/I43vNRF1T4JgqW6lrCpyvZeWuyyfn0P/HSeo0a1w1rMkaHsz0vEW8J+YPqtm9RvgtK6iFVubX05gC52tZ1Ze9pLmB1Rk4KnAObXD7AeC6Use2LjR6K3OFX/or55cCM6a2fSoPQhIFOC9g2nPyGHHEua1Yl/HRgGdObcXJSp/Ao5ZRgaeu2sBdUsfzd6cQrMnvRgXO13P+JUKuvO5nh4PsY5vR/fOk+aIDazckMddt9LY0Lrqeq1zT3VRRNs1F4aJWFavfvmlKv2w9hz+2FVzdetf8jAZzU3jg30t/nlORGo7L3IEHRUzEXVp/+9WI/ibAGsdi2ZTAsSK7KOOWCi+KErH8KBWOFdlFGbdUeFGUiOVHqXCsyC7KuO9O4SdkclFM9B/H7QAAAABJRU5ErkJggg==\"\n\n/***/ }),\n\n/***/ 689:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_ajaxHttp__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_utility_js__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vuex__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__js_Event_js__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__js_enum_js__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__config_js__ = __webpack_require__(37);\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'mapchoice',\n  components: {\n    Group: __WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue___default.a,\n    Cell: __WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue___default.a\n  },\n  data: function data() {\n    return {\n      map: null,\n      itemlist: [],\n      addressItem: ''\n    };\n  },\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_vuex__[\"b\" /* mapState */])(['detail', 'checkSetInfo'])),\n  beforeDestroy: function beforeDestroy() {\n    __WEBPACK_IMPORTED_MODULE_6__js_Event_js__[\"a\" /* default */].$off(\"searchtextDone\");\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    if (this.addressItem !== '') {\n      if (this.detail) {\n        this.detail.address = this.addressItem;\n        this.$store.commit('updateDetail', this.detail);\n      }\n\n      if (this.checkSetInfo) {\n        this.checkSetInfo.address = this.addressItem;\n        this.$store.commit('updateCheckSetInfo', this.checkSetInfo);\n      }\n    }\n    next();\n  },\n  mounted: function mounted() {\n    __WEBPACK_IMPORTED_MODULE_6__js_Event_js__[\"a\" /* default */].$on('searchtextDone', function (searchtext) {\n      this.searchContent(searchtext);\n    }.bind(this));\n\n    if (this.detail !== '' && this.detail.type === __WEBPACK_IMPORTED_MODULE_7__js_enum_js__[\"a\" /* default */].SignIn && this.detail.address !== '') {\n      var map = new BMap.Map(\"choicemap\");\n      this.map = map;\n      map.centerAndZoom(this.detail.address.point, 15);\n      map.disableDragging();\n      map.disableDoubleClickZoom();\n      map.enableScrollWheelZoom(false);\n      map.enableContinuousZoom(false);\n      this.addMarkerLabel(this.detail.address.point);\n\n      this.searchMap(this.detail.address.point);\n    } else if (this.checkSetInfo.type === 'checkset' && this.checkSetInfo.address.point) {\n      var map = new BMap.Map(\"choicemap\");\n      this.map = map;\n      var point = new BMap.Point(this.checkSetInfo.address.point.lng, this.checkSetInfo.address.point.lat);\n      map.centerAndZoom(point, 15);\n      map.disableDragging();\n      map.disableDoubleClickZoom();\n      map.enableScrollWheelZoom(false);\n      map.enableContinuousZoom(false);\n      this.addMarkerLabel(point);\n\n      this.searchMap(point);\n    } else {\n      var map = new BMap.Map(\"choicemap\");\n      this.map = map;\n      map.disableDragging();\n      map.disableDoubleClickZoom();\n      map.enableScrollWheelZoom(false);\n      map.enableContinuousZoom(false);\n      var self = this;\n      this.$vux.loading.show({\n        text: '位置获取中'\n      });\n      if (__WEBPACK_IMPORTED_MODULE_8__config_js__[\"a\" /* PLATFORM */] !== 'web' && this.isAndroid()) {\n        //this.isAndroid()&&navigator.geolocation\n        var successCallback = function successCallback(data) {\n          self.$vux.loading.hide();\n          var point = new BMap.Point(parseFloat(data.longitude), parseFloat(data.latitude));\n          map.centerAndZoom(point, 15);\n          self.addMarkerLabel(point);\n          self.searchMap(point);\n        };\n\n        var failedCallback = function failedCallback(data) {\n          self.$vux.loading.hide();\n\n          self.$vux.toast.text('定位失败', 'bottom');\n        };\n\n        ;\n\n        ;\n        baidu_location.getCurrentPosition(successCallback, failedCallback);\n      } else if (__WEBPACK_IMPORTED_MODULE_8__config_js__[\"a\" /* PLATFORM */] !== 'web' && this.isIOS()) {\n        var onError = function onError(error) {\n          self.$vux.loading.hide();\n\n          self.$vux.toast.text('定位失败', 'bottom');\n        };\n\n        var onSuccess = function onSuccess(position) {\n          self.$vux.loading.hide();\n          var point = new BMap.Point(parseFloat(position.coords.longitude), parseFloat(position.coords.latitude));\n          var convertor = new BMap.Convertor();\n          var pointArr = [];\n          pointArr.push(point);\n          convertor.translate(pointArr, 1, 5, function (data) {\n            if (data.status === 0) {\n              var newpoint = data.points[0];\n              map.centerAndZoom(newpoint, 15);\n              self.addMarkerLabel(newpoint);\n              self.searchMap(newpoint);\n            } else {\n              self.$vux.loading.hide();\n\n              self.$vux.toast.text('定位失败', 'bottom');\n            }\n          });\n        };\n\n        navigator.geolocation.getCurrentPosition(onSuccess, onError);\n      }\n    }\n  },\n\n  methods: {\n    isAndroid: function isAndroid() {\n      var u = navigator.userAgent;\n      return u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;\n    },\n    isIOS: function isIOS() {\n      var u = navigator.userAgent;\n      return !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);;\n    },\n    getCity: function getCity(point) {\n      var geoc = new BMap.Geocoder();\n      var self = this;\n\n      geoc.getLocation(point, function (rs) {\n        var addComp = rs.addressComponents;\n        if (rs.surroundingPois.length > 0) {\n\n          self.itemlist = [];\n          self.itemlist = rs.surroundingPois;\n        } else {}\n      });\n    },\n    addMarkerLabel: function addMarkerLabel(point) {\n      this.map.clearOverlays();\n      var myIcon = new BMap.Icon(__webpack_require__(558), new BMap.Size(60, 60));\n      var marker2 = new BMap.Marker(point, { icon: myIcon });\n      this.map.addOverlay(marker2);\n    },\n    selected: function selected(title) {\n      return this.addressItem.title === title;\n    },\n    choicePositon: function choicePositon(item) {\n      item.wktype = 'poi';\n      this.addressItem = item;\n      this.addMarkerLabel(this.addressItem.point);\n      this.map.centerAndZoom(this.addressItem.point, 15);\n    },\n    searchMap: function searchMap(mPoint, key) {\n      var self = this;\n      self.itemlist = [];\n      var options = {\n        onSearchComplete: function onSearchComplete(results) {\n\n          if (local.getStatus() == BMAP_STATUS_SUCCESS) {\n            var itemlist = [];\n            for (var i = 0; i < results.getCurrentNumPois(); i++) {\n              itemlist.push(results.getPoi(i));\n            }\n            self.itemlist = itemlist;\n          }\n        },\n        pageCapacity: 20\n      };\n      var local = new BMap.LocalSearch(this.map, options);\n      if (!key) {\n        key = '公司';\n      }\n      local.searchInBounds(key, this.map.getBounds());\n    },\n    searchContent: function searchContent(content) {\n      if (this.detail.type === __WEBPACK_IMPORTED_MODULE_7__js_enum_js__[\"a\" /* default */].SignIn && this.detail.address.point) {\n        this.searchMap(this.detail.address.point, content);\n      } else if (this.checkSetInfo.type === 'checkset' && this.checkSetInfo.address.point) {\n        this.searchMap(this.checkSetInfo.address.point, content);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 718:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(73)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"MapChoice.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 784:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(718);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(476)(\"f534dc80\", content, true);\n\n/***/ }),\n\n/***/ 912:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticStyle: {\n      \"height\": \"200px\",\n      \"width\": \"100%\",\n      \"overflow\": \"hidden\"\n    },\n    attrs: {\n      \"id\": \"choicemap\"\n    }\n  }), _vm._v(\" \"), _c('group', {\n    attrs: {\n      \"gutter\": \"0\"\n    }\n  }, _vm._l((_vm.itemlist), function(item, index) {\n    return _c('cell', {\n      key: index,\n      attrs: {\n        \"title\": item.title,\n        \"inline-desc\": item.address\n      },\n      nativeOn: {\n        \"click\": function($event) {\n          _vm.choicePositon(item)\n        }\n      }\n    }, [_c('div', {\n      staticStyle: {\n        \"width\": \"40px\",\n        \"height\": \"40px\"\n      }\n    }, [(_vm.selected(item.title)) ? _c('img', {\n      staticStyle: {\n        \"padding\": \"10px\"\n      },\n      attrs: {\n        \"src\": __webpack_require__(121),\n        \"height\": \"20\",\n        \"width\": \"20\"\n      },\n      slot: \"value\"\n    }) : _vm._e()])])\n  }))], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/35.60231bf062dc0c3d0997.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e0bcf38\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MapChoice.vue\")\n}\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapChoice.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e0bcf38\\\"}!../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../node_modules/vux-loader/src/template-loader.js!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MapChoice.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-1e0bcf38\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/office/page/MapChoice.vue\n// module id = 518\n// module chunks = 35","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAADQ0lEQVRoQ+2Zz1UbQQzGJa0fHOMSoIKYCgIVBCqAVBC4ZM0JcwLnAqkAUgGmAkwHpoKQCmKOycPz8XaNCc9/dmSPxviZ3ZuftTP66dNIM7NM7+zhd8ZLJfCyK14qXCq8ZBEoU3rJBB3BKRUuFV6yCMwlpfGdag6yC6DGTFUirvXjiA5AXSa0ROiWv1EndnyjAj+e0B4zHxHzmgYEQDsBjvmQ2hr7WWyiAOOE1pzw1X8lp3MtB1/FDh9Qd7o3/dbmwGjStiO+IOKqf/oiC3SFsWWd5qbAOKFNJ3ITBvr6bXtoM+B+YeKbcGWHw4WuOGzwId1bBNIM+LHJbSb+ZOHUCDLQrtSxZTG2CXBejUUuLByaNIaQ2+GUWqFzmAD3TrlDzB9DnSl+H50kxUboHMHA/RYkv1SOAA/EaIijDiXU7fWoxsz72mCJc+uhazkYuNekfSI58wIDd7KKzXG9tdeUSyLa9Y5B7iBJ6dxvN9kiHPhUzonpq88JYbcxqafijKruL7e9SoN+JHW375ur6P9gYE11BuG2kmKzyJFeUxpEdFS4FVGM4wvGXIBJoYxm06IJXHRgzfrTOKpsbT+T1O35oOKmtKoHoysrWC86DKiWhnNfKoeUFbiZn+CUzgvOP/nj8wCEViXFzjg7lbrAg6xiLfQEFQycAWjSug+KjgANrtN1/qvfw7N2lBUs3xOcztkEJsBTbT58WBP+t9h0mAFnAz2ecouZP8/I43vNRF1T4JgqW6lrCpyvZeWuyyfn0P/HSeo0a1w1rMkaHsz0vEW8J+YPqtm9RvgtK6iFVubX05gC52tZ1Ze9pLmB1Rk4KnAObXD7AeC6Use2LjR6K3OFX/or55cCM6a2fSoPQhIFOC9g2nPyGHHEua1Yl/HRgGdObcXJSp/Ao5ZRgaeu2sBdUsfzd6cQrMnvRgXO13P+JUKuvO5nh4PsY5vR/fOk+aIDazckMddt9LY0Lrqeq1zT3VRRNs1F4aJWFavfvmlKv2w9hz+2FVzdetf8jAZzU3jg30t/nlORGo7L3IEHRUzEXVp/+9WI/ibAGsdi2ZTAsSK7KOOWCi+KErH8KBWOFdlFGbdUeFGUiOVHqXCsyC7KuO9O4SdkclFM9B/H7QAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/sign_loc.png\n// module id = 558\n// module chunks = 15 24 33 35","\nimport { AjaxHttp } from '../../../js/ajaxHttp'\nimport { getImageUrl } from \"../../../js/utility.js\"\nimport Group from 'vux/src/components/group/index.vue'\nimport Cell from 'vux/src/components/cell/index.vue'\n\nimport { mapState } from 'vuex'\nimport event from '../../../js/Event.js'\nimport PlateType from '../../../js/enum.js'\nimport { PLATFORM } from '../../../config.js'\n\nexport default {\nname: 'mapchoice',\ncomponents: {\nGroup,\nCell\n},\ndata() {\nreturn {\nmap: null,\nitemlist: [],\naddressItem: '',\n}\n},\ncomputed: {\n...mapState([\n'detail',\n'checkSetInfo' \n])\n},\nbeforeDestroy() {\nevent.$off(\"searchtextDone\");\n},\nbeforeRouteLeave(to, from, next) {\nif (this.addressItem !== '') {\nif (this.detail) {\nthis.detail.address = this.addressItem;\nthis.$store.commit('updateDetail', this.detail);\n}\n\nif (this.checkSetInfo) {\nthis.checkSetInfo.address = this.addressItem;\nthis.$store.commit('updateCheckSetInfo', this.checkSetInfo);\n}\n}\nnext();\n},\nmounted() {\nevent.$on('searchtextDone', function(searchtext) {\nthis.searchContent(searchtext);\n}.bind(this));\n\nif (this.detail !== '' && this.detail.type === PlateType.SignIn && this.detail.address !== '') {\nvar map = new BMap.Map(\"choicemap\");\nthis.map = map;\nmap.centerAndZoom(this.detail.address.point, 15);\nmap.disableDragging(); \nmap.disableDoubleClickZoom();\nmap.enableScrollWheelZoom(false);\nmap.enableContinuousZoom(false);\nthis.addMarkerLabel(this.detail.address.point);\n\nthis.searchMap(this.detail.address.point);\n} else if (this.checkSetInfo.type === 'checkset' && this.checkSetInfo.address.point) {\nvar map = new BMap.Map(\"choicemap\");\nthis.map = map;\nvar point = new BMap.Point(this.checkSetInfo.address.point.lng, this.checkSetInfo.address.point.lat);\nmap.centerAndZoom(point, 15);\nmap.disableDragging(); \nmap.disableDoubleClickZoom();\nmap.enableScrollWheelZoom(false);\nmap.enableContinuousZoom(false);\nthis.addMarkerLabel(point);\n\nthis.searchMap(point);\n} else {\nvar map = new BMap.Map(\"choicemap\");\nthis.map = map;\nmap.disableDragging(); \nmap.disableDoubleClickZoom();\nmap.enableScrollWheelZoom(false);\nmap.enableContinuousZoom(false);\nvar self = this;\nthis.$vux.loading.show({\ntext: '位置获取中'\n});\nif (PLATFORM !== 'web' && this.isAndroid()) { //this.isAndroid()&&navigator.geolocation\nfunction successCallback(data) {\nself.$vux.loading.hide();\nvar point = new BMap.Point(parseFloat(data.longitude), parseFloat(data.latitude));\nmap.centerAndZoom(point, 15);\nself.addMarkerLabel(point);\nself.searchMap(point);\n\n};\n\nfunction failedCallback(data) {\nself.$vux.loading.hide();\n\nself.$vux.toast.text('定位失败', 'bottom');\n};\nbaidu_location.getCurrentPosition(successCallback, failedCallback);\n} else if (PLATFORM !== 'web' && this.isIOS()) {\nvar onSuccess = function(position) {\nself.$vux.loading.hide();\nvar point = new BMap.Point(parseFloat(position.coords.longitude), parseFloat(position.coords.latitude));\nvar convertor = new BMap.Convertor();\nvar pointArr = [];\npointArr.push(point);\nconvertor.translate(pointArr, 1, 5, function(data) {\nif (data.status === 0) {\nvar newpoint = data.points[0];\nmap.centerAndZoom(newpoint, 15);\nself.addMarkerLabel(newpoint);\nself.searchMap(newpoint);\n} else {\nself.$vux.loading.hide();\n\nself.$vux.toast.text('定位失败', 'bottom');\n}\n});\n};\n\nfunction onError(error) {\nself.$vux.loading.hide();\n\nself.$vux.toast.text('定位失败', 'bottom');\n}\n\nnavigator.geolocation.getCurrentPosition(onSuccess, onError);\n}\n}\n},\nmethods: {\nisAndroid() {\nvar u = navigator.userAgent;\nreturn u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;\n},\nisIOS() {\nvar u = navigator.userAgent;\nreturn !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);;\n},\ngetCity(point) {\nvar geoc = new BMap.Geocoder();\nvar self = this;\n\ngeoc.getLocation(point, function(rs) {\nvar addComp = rs.addressComponents;\nif (rs.surroundingPois.length > 0) {\n\n\n\n\nself.itemlist = [];\nself.itemlist = rs.surroundingPois;\n} else {\n\n\n\n\n\n\n}\n\n});\n},\naddMarkerLabel(point) {\nthis.map.clearOverlays()\nvar myIcon = new BMap.Icon(require(\"../../../assets/sign_loc.png\"), new BMap.Size(60, 60));\nvar marker2 = new BMap.Marker(point, { icon: myIcon }); \nthis.map.addOverlay(marker2);\n},\nselected(title) {\nreturn this.addressItem.title === title;\n},\nchoicePositon(item) {\nitem.wktype = 'poi';\nthis.addressItem = item;\nthis.addMarkerLabel(this.addressItem.point);\nthis.map.centerAndZoom(this.addressItem.point, 15);\n},\nsearchMap(mPoint, key) {\nvar self = this;\nself.itemlist = [];\nvar options = {\nonSearchComplete: function(results) {\n\nif (local.getStatus() == BMAP_STATUS_SUCCESS) {\nvar itemlist = [];\nfor (var i = 0; i < results.getCurrentNumPois(); i++) {\nitemlist.push(results.getPoi(i));\n}\nself.itemlist = itemlist;\n}\n},\npageCapacity: 20\n};\nvar local = new BMap.LocalSearch(this.map, options);\nif (!key) {\nkey = '公司';\n}\nlocal.searchInBounds(key, this.map.getBounds());\n},\nsearchContent(content) {\nif (this.detail.type === PlateType.SignIn && this.detail.address.point) {\nthis.searchMap(this.detail.address.point, content);\n} else if (this.checkSetInfo.type === 'checkset' && this.checkSetInfo.address.point) {\nthis.searchMap(this.checkSetInfo.address.point, content);\n}\n},\n}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/office/page/MapChoice.vue","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"MapChoice.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1e0bcf38\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/office/page/MapChoice.vue\n// module id = 718\n// module chunks = 35","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e0bcf38\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./MapChoice.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"f534dc80\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1e0bcf38\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/office/page/MapChoice.vue\n// module id = 784\n// module chunks = 35","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticStyle: {\n      \"height\": \"200px\",\n      \"width\": \"100%\",\n      \"overflow\": \"hidden\"\n    },\n    attrs: {\n      \"id\": \"choicemap\"\n    }\n  }), _vm._v(\" \"), _c('group', {\n    attrs: {\n      \"gutter\": \"0\"\n    }\n  }, _vm._l((_vm.itemlist), function(item, index) {\n    return _c('cell', {\n      key: index,\n      attrs: {\n        \"title\": item.title,\n        \"inline-desc\": item.address\n      },\n      nativeOn: {\n        \"click\": function($event) {\n          _vm.choicePositon(item)\n        }\n      }\n    }, [_c('div', {\n      staticStyle: {\n        \"width\": \"40px\",\n        \"height\": \"40px\"\n      }\n    }, [(_vm.selected(item.title)) ? _c('img', {\n      staticStyle: {\n        \"padding\": \"10px\"\n      },\n      attrs: {\n        \"src\": require(\"../../../assets/selected.png\"),\n        \"height\": \"20\",\n        \"width\": \"20\"\n      },\n      slot: \"value\"\n    }) : _vm._e()])])\n  }))], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e0bcf38\"}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/office/page/MapChoice.vue\n// module id = 912\n// module chunks = 35"],"sourceRoot":""}