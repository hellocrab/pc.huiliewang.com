webpackJsonp([46],{491:function(t,e,s){function i(t){s(813)}var a=s(0)(s(658),s(941),i,"data-v-7defa1b1",null);t.exports=a.exports},658:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(20),a=s.n(i),r=s(49),o=s.n(r),n=s(14),l=s(3),p=s(28);e.default={name:"selectlist",components:{Group:a.a,Cell:o.a},data:function(){return{p:1,itemlist:[],showType:0,selectIDs:[]}},beforeDestroy:function(){p.a.$off("saveDone")},mounted:function(){"4"!==this.$route.params.selecttype&&"5"!==this.$route.params.selecttype||(this.selectIDs=JSON.parse(this.$route.params.id)),p.a.$on("saveDone",function(){this.saveInfos()}.bind(this))},methods:{infinite:function(t){this.getList(t)},refresh:function(t){this.p=1,this.getList(t)},getList:function(t){s.i(n.a)("POST",this.getUrl(),this.getPostParams(),this,function(e,i,a){if(a&&s.i(l.h)(e.list)){for(var r=[],o=0;o<e.list.length;o++)r[o]=i.getNewItem(e.list[o]);"1"===i.$route.params.selecttype?(i.itemlist=r,t(!0)):"2"!==i.$route.params.selecttype&&"3"!==i.$route.params.selecttype&&"4"!==i.$route.params.selecttype&&"5"!==i.$route.params.selecttype||(1===i.p?i.itemlist=e.list:i.itemlist=i.itemlist.concat(e.list),"function"==typeof t&&(1==i.p&&e.list.length<10?t(!0):0===e.list.length?t(!0):t()),i.p=i.p+1),i.getShowType()}})},getUrl:function(){return"1"===this.$route.params.selecttype?"m=business&a=status":"2"===this.$route.params.selecttype||"3"===this.$route.params.selecttype||"4"===this.$route.params.selecttype||"5"===this.$route.params.selecttype?"m=user&a=listdialog":""},getPostParams:function(){return"1"===this.$route.params.selecttype?{id:this.$route.params.id}:"2"===this.$route.params.selecttype?{p:this.p}:"3"===this.$route.params.selecttype?{p:this.p,by:"examine"}:"4"===this.$route.params.selecttype?{p:this.p,by:"task",field:"about_roles"}:"5"===this.$route.params.selecttype?{p:this.p,by:"task",field:"owner_role_id"}:{}},getNewItem:function(t){return"1"===this.$route.params.selecttype?{title:t.name,id:t.status_id}:"2"===this.$route.params.selecttype||"3"===this.$route.params.selecttype?(t.thumb_path=s.i(l.c)(t.thumb_path),t):"4"===this.$route.params.selecttype||"5"===this.$route.params.selecttype?(t.thumb_path=s.i(l.c)(t.thumb_path),t.selected=s.i(l.a)(this.selectIDs,t.role_id),t):void 0},getShowType:function(){"1"===this.$route.params.selecttype?this.showType=1:"2"===this.$route.params.selecttype||"3"===this.$route.params.selecttype?this.showType=2:"4"!==this.$route.params.selecttype&&"5"!==this.$route.params.selecttype||(this.showType=3)},selectClick:function(t){"1"===this.$route.params.selecttype?this.handleInfo(t):"2"!==this.$route.params.selecttype&&"3"!==this.$route.params.selecttype||this.handleResult(t)},getHandleUrl:function(){return"1"===this.$route.params.selecttype?"m=business&a=advance":""},getHandlePostParams:function(t){return"1"===this.$route.params.selecttype?{id:this.$route.params.id,status_id:t.id}:{}},handleInfo:function(t){s.i(n.b)("POST",this.getHandleUrl(),this.getHandlePostParams(t),this,function(e,s,i){i&&s.handleResult(t,e)})},handleResult:function(t,e){"1"===this.$route.params.selecttype?(p.a.$emit("selectedRelateItem",{type:this.$route.params.selecttype,item:t,section:this.$route.params.section,row:this.$route.params.row}),this.$router.go(-1)):"2"!==this.$route.params.selecttype&&"3"!==this.$route.params.selecttype||(p.a.$emit("selectedRelateItem",{type:this.$route.params.selecttype,item:t,section:this.$route.params.section,row:this.$route.params.row}),this.$router.go(-1))},getSelectImage:function(t){return s(t?121:122)},selectItem:function(t,e){t.selected=!t.selected},saveInfos:function(){for(var t=[],e=0;e<this.itemlist.length;e++){var s=this.itemlist[e];s.selected&&t.push(s)}t.length>0?(p.a.$emit("selectedRelateItem",{type:this.$route.params.selecttype,othertype:this.$route.params.type,data:t,section:this.$route.params.section,row:this.$route.params.row}),this.$router.go(-1)):this.$vux.toast.text("请先进行选择","top")}}}},747:function(t,e,s){e=t.exports=s(73)(!0),e.i(s(477),""),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"SelectList.vue",sourceRoot:""}])},813:function(t,e,s){var i=s(747);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(476)("7c581f7e",i,!0)},941:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("scroller",{ref:"my_scroller",attrs:{"on-refresh":t.refresh,"on-infinite":t.infinite}},[s("group",{attrs:{gutter:"0"}},[t._l(t.itemlist,function(e,i){return 1===t.showType?s("cell",{key:i,attrs:{title:e.title,"is-link":""},nativeOn:{click:function(s){t.selectClick(e)}}}):t._e()}),t._v(" "),t._l(t.itemlist,function(e,i){return 2===t.showType?s("cell",{key:i,attrs:{title:e.user_name,"inline-desc":e.department_name,"is-link":""},nativeOn:{click:function(s){t.selectClick(e)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumb_path,expression:"item.thumb_path"}],staticStyle:{display:"block","margin-right":"10px","border-radius":"20px"},attrs:{width:"40"},slot:"icon"})]):t._e()}),t._v(" "),t._l(t.itemlist,function(e,i){return 3===t.showType?s("cell",{key:i,attrs:{title:e.user_name,"inline-desc":e.department_name,"is-link":""},nativeOn:{click:function(s){t.selectClick(e)}}},[s("div",{staticClass:"flex-container flex-center",staticStyle:{"margin-right":"10px"},on:{click:function(s){t.selectItem(e,i)}},slot:"icon"},[s("img",{staticStyle:{"margin-right":"10px"},attrs:{src:t.getSelectImage(e.selected),height:"20",width:"20"}}),t._v(" "),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumb_path,expression:"item.thumb_path"}],staticStyle:{display:"block","border-radius":"20px"},attrs:{width:"40"}})])]):t._e()})],2)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=46.6b3ef0fd27a32f418fbc.js.map