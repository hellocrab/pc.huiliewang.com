{"version":3,"sources":["webpack:///static/js/33.775448614ab19123daff.js","webpack:///./src/components/office/page/SignHistory.vue?33ec","webpack:///./src/assets/sign_loc.png?f750*","webpack:///./src/components/office/page/SignHistory.vue","webpack:///./src/components/office/page/SignHistory.vue?adee","webpack:///./src/components/office/page/SignHistory.vue?46de","webpack:///./src/components/office/page/SignHistory.vue?0823"],"names":["webpackJsonp","523","module","exports","__webpack_require__","injectStyle","ssrContext","Component","558","694","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2__js_enum_js__","__WEBPACK_IMPORTED_MODULE_3__js_ajaxHttp__","__WEBPACK_IMPORTED_MODULE_4__js_utility_js__","name","data","rolelist","selectIndex","computed","i","mounted","this","detail","type","SignIn","map","BMap","Map","centerAndZoom","address","point","self","Geolocation","getCurrentPosition","r","getStatus","BMAP_STATUS_SUCCESS","$vux","toast","text","enableHighAccuracy","getRoleDetail","getSignDetail","methods","postParams","detailSecond","date","department_id","departmentlist","role_id","res","wself","success","list","length","item","clearOverlays","addMarkerLabel","array","pointArray","Array","myIcon","Icon","Size","Point","parseFloat","y","x","marker2","Marker","icon","addOverlay","setViewport","getUserImage","url","selectItem","index","751","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","817","content","locals","945","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","width","overflow","attrs","id","_v","background","_l","key","padding","height","text-align","flex-shrink","on","click","$event","directives","rawName","thumb_path","expression","border-radius","font-size","margin-top","style","color","_s","full_name","staticRenderFns"],"mappings":"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","file":"static/js/33.775448614ab19123daff.js","sourcesContent":["webpackJsonp([33],{\n\n/***/ 523:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(817)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(694),\n  /* template */\n  __webpack_require__(945),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-87f2991c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 558:\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAADQ0lEQVRoQ+2Zz1UbQQzGJa0fHOMSoIKYCgIVBCqAVBC4ZM0JcwLnAqkAUgGmAkwHpoKQCmKOycPz8XaNCc9/dmSPxviZ3ZuftTP66dNIM7NM7+zhd8ZLJfCyK14qXCq8ZBEoU3rJBB3BKRUuFV6yCMwlpfGdag6yC6DGTFUirvXjiA5AXSa0ROiWv1EndnyjAj+e0B4zHxHzmgYEQDsBjvmQ2hr7WWyiAOOE1pzw1X8lp3MtB1/FDh9Qd7o3/dbmwGjStiO+IOKqf/oiC3SFsWWd5qbAOKFNJ3ITBvr6bXtoM+B+YeKbcGWHw4WuOGzwId1bBNIM+LHJbSb+ZOHUCDLQrtSxZTG2CXBejUUuLByaNIaQ2+GUWqFzmAD3TrlDzB9DnSl+H50kxUboHMHA/RYkv1SOAA/EaIijDiXU7fWoxsz72mCJc+uhazkYuNekfSI58wIDd7KKzXG9tdeUSyLa9Y5B7iBJ6dxvN9kiHPhUzonpq88JYbcxqafijKruL7e9SoN+JHW375ur6P9gYE11BuG2kmKzyJFeUxpEdFS4FVGM4wvGXIBJoYxm06IJXHRgzfrTOKpsbT+T1O35oOKmtKoHoysrWC86DKiWhnNfKoeUFbiZn+CUzgvOP/nj8wCEViXFzjg7lbrAg6xiLfQEFQycAWjSug+KjgANrtN1/qvfw7N2lBUs3xOcztkEJsBTbT58WBP+t9h0mAFnAz2ecouZP8/I43vNRF1T4JgqW6lrCpyvZeWuyyfn0P/HSeo0a1w1rMkaHsz0vEW8J+YPqtm9RvgtK6iFVubX05gC52tZ1Ze9pLmB1Rk4KnAObXD7AeC6Use2LjR6K3OFX/or55cCM6a2fSoPQhIFOC9g2nPyGHHEua1Yl/HRgGdObcXJSp/Ao5ZRgaeu2sBdUsfzd6cQrMnvRgXO13P+JUKuvO5nh4PsY5vR/fOk+aIDazckMddt9LY0Lrqeq1zT3VRRNs1F4aJWFavfvmlKv2w9hz+2FVzdetf8jAZzU3jg30t/nlORGo7L3IEHRUzEXVp/+9WI/ibAGsdi2ZTAsSK7KOOWCi+KErH8KBWOFdlFGbdUeFGUiOVHqXCsyC7KuO9O4SdkclFM9B/H7QAAAABJRU5ErkJggg==\"\n\n/***/ }),\n\n/***/ 694:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_enum_js__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__js_ajaxHttp__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__js_utility_js__ = __webpack_require__(3);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'signhistory',\n  data: function data() {\n    return {\n      rolelist: [],\n      selectIndex: -1\n    };\n  },\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapState */])(['detail', 'detailSecond'])),\n  mounted: function mounted() {\n    if (this.detail !== '' && this.detail.type === __WEBPACK_IMPORTED_MODULE_2__js_enum_js__[\"a\" /* default */].SignIn) {\n      var map = new BMap.Map(\"historymap\");\n      this.map = map;\n      map.centerAndZoom(this.detail.address.point, 15);\n    } else {\n      var map = new BMap.Map(\"historymap\");\n      var self = this;\n      var geolocation = new BMap.Geolocation();\n      geolocation.getCurrentPosition(function (r) {\n        if (this.getStatus() == BMAP_STATUS_SUCCESS) {\n          map.centerAndZoom(r.point, 15);\n        } else {\n          self.$vux.toast.text('定位失败', 'bottom');\n        }\n      }, { enableHighAccuracy: true });\n      this.map = map;\n    }\n\n    this.getRoleDetail();\n    this.getSignDetail();\n  },\n\n  methods: {\n    getRoleDetail: function getRoleDetail() {\n      var postParams = {};\n      if (this.detailSecond !== '' && this.detailSecond.type === 'teamsign') {\n        postParams = { 'date': this.detailSecond.date, type: 'role', 'department_id': this.detailSecond.departmentlist, 'role_id': this.detailSecond.rolelist };\n      } else {\n        postParams = { 'date': this.detailSecond.date, type: 'role' };\n      }\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__js_ajaxHttp__[\"b\" /* AjaxHttp */])('POST', 'm=sign&a=view', postParams, this, function (res, wself, success) {\n        if (success && __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__js_utility_js__[\"h\" /* isArrayType */])(res.list)) {\n          wself.rolelist = res.list;\n          if (wself.rolelist.length > 0) {\n            wself.selectIndex = 0;\n            var item = wself.rolelist[wself.selectIndex];\n            wself.map.clearOverlays();\n            wself.getSignDetail(item.role_id);\n          }\n        }\n      });\n    },\n    getSignDetail: function getSignDetail(role_id) {\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__js_ajaxHttp__[\"b\" /* AjaxHttp */])('POST', 'm=sign&a=view', { 'date': this.detailSecond.date, type: 'sign', 'role_id': role_id }, this, function (res, wself, success) {\n        if (success && __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__js_utility_js__[\"h\" /* isArrayType */])(res.list)) {\n          wself.addMarkerLabel(res.list);\n        }\n      });\n    },\n    addMarkerLabel: function addMarkerLabel(array) {\n      var pointArray = new Array();\n      for (var i = 0; i < array.length; i++) {\n        var item = array[i];\n        var myIcon = new BMap.Icon(__webpack_require__(558), new BMap.Size(300, 157));\n        var point = new BMap.Point(parseFloat(item.y), parseFloat(item.x));\n        pointArray[i] = point;\n        var marker2 = new BMap.Marker(point, { icon: myIcon }); // 创建标注\n        this.map.addOverlay(marker2);;\n      }\n      this.map.setViewport(pointArray);\n    },\n    getUserImage: function getUserImage(url) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__js_utility_js__[\"c\" /* getImageUrl */])(url);\n    },\n    selectItem: function selectItem(item, index) {\n      this.selectIndex = index;\n      this.map.clearOverlays();\n      this.getSignDetail(item.role_id);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 751:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(73)(true);\n// imports\nexports.i(__webpack_require__(477), \"\");\n\n// module\nexports.push([module.i, \".historymap[data-v-87f2991c]{position:absolute;top:0;bottom:80px;left:0;right:0}.historyBottom[data-v-87f2991c]{position:absolute;height:80px;bottom:0;left:0;right:0}\", \"\", {\"version\":3,\"sources\":[\"/src/components/office/page/SignHistory.vue\"],\"names\":[],\"mappings\":\"AAEA,6BACE,kBAAmB,AACnB,MAAS,AACT,YAAa,AACb,OAAU,AACV,OAAU,CACX,AACD,gCACE,kBAAmB,AACnB,YAAa,AACb,SAAY,AACZ,OAAU,AACV,OAAU,CACX\",\"file\":\"SignHistory.vue\",\"sourcesContent\":[\"\\n@import url(\\\"../../../css/mystyle.css\\\");\\n.historymap[data-v-87f2991c] {\\n  position: absolute;\\n  top: 0px;\\n  bottom: 80px;\\n  left: 0px;\\n  right: 0px\\n}\\n.historyBottom[data-v-87f2991c] {\\n  position: absolute;\\n  height: 80px;\\n  bottom: 0px;\\n  left: 0px;\\n  right: 0px\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 817:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(751);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(476)(\"7d844c75\", content, true);\n\n/***/ }),\n\n/***/ 945:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"historymap\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"overflow\": \"hidden\"\n    },\n    attrs: {\n      \"id\": \"historymap\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"historyBottom flex-container\",\n    staticStyle: {\n      \"background\": \"white\",\n      \"overflow\": \"scroll\"\n    }\n  }, _vm._l((_vm.rolelist), function(item, index) {\n    return _c('div', {\n      key: index,\n      staticStyle: {\n        \"padding\": \"5px\",\n        \"width\": \"70px\",\n        \"height\": \"70px\",\n        \"text-align\": \"center\",\n        \"flex-shrink\": \"0\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.selectItem(item, index)\n        }\n      }\n    }, [_c('img', {\n      directives: [{\n        name: \"lazy\",\n        rawName: \"v-lazy\",\n        value: (_vm.getUserImage(item.thumb_path)),\n        expression: \"getUserImage(item.thumb_path)\"\n      }],\n      staticStyle: {\n        \"border-radius\": \"20px\"\n      },\n      attrs: {\n        \"height\": \"40\",\n        \"width\": \"40\"\n      }\n    }), _vm._v(\" \"), _c('p', {\n      staticStyle: {\n        \"font-size\": \"14px\",\n        \"margin-top\": \"-2px\"\n      },\n      style: ({\n        'color': _vm.selectIndex === index ? '#2385CE' : '000'\n      })\n    }, [_vm._v(_vm._s(item.full_name))])])\n  }))])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/33.775448614ab19123daff.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-87f2991c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SignHistory.vue\")\n}\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SignHistory.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-87f2991c\\\"}!../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../node_modules/vux-loader/src/template-loader.js!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SignHistory.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-87f2991c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/office/page/SignHistory.vue\n// module id = 523\n// module chunks = 33","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAADQ0lEQVRoQ+2Zz1UbQQzGJa0fHOMSoIKYCgIVBCqAVBC4ZM0JcwLnAqkAUgGmAkwHpoKQCmKOycPz8XaNCc9/dmSPxviZ3ZuftTP66dNIM7NM7+zhd8ZLJfCyK14qXCq8ZBEoU3rJBB3BKRUuFV6yCMwlpfGdag6yC6DGTFUirvXjiA5AXSa0ROiWv1EndnyjAj+e0B4zHxHzmgYEQDsBjvmQ2hr7WWyiAOOE1pzw1X8lp3MtB1/FDh9Qd7o3/dbmwGjStiO+IOKqf/oiC3SFsWWd5qbAOKFNJ3ITBvr6bXtoM+B+YeKbcGWHw4WuOGzwId1bBNIM+LHJbSb+ZOHUCDLQrtSxZTG2CXBejUUuLByaNIaQ2+GUWqFzmAD3TrlDzB9DnSl+H50kxUboHMHA/RYkv1SOAA/EaIijDiXU7fWoxsz72mCJc+uhazkYuNekfSI58wIDd7KKzXG9tdeUSyLa9Y5B7iBJ6dxvN9kiHPhUzonpq88JYbcxqafijKruL7e9SoN+JHW375ur6P9gYE11BuG2kmKzyJFeUxpEdFS4FVGM4wvGXIBJoYxm06IJXHRgzfrTOKpsbT+T1O35oOKmtKoHoysrWC86DKiWhnNfKoeUFbiZn+CUzgvOP/nj8wCEViXFzjg7lbrAg6xiLfQEFQycAWjSug+KjgANrtN1/qvfw7N2lBUs3xOcztkEJsBTbT58WBP+t9h0mAFnAz2ecouZP8/I43vNRF1T4JgqW6lrCpyvZeWuyyfn0P/HSeo0a1w1rMkaHsz0vEW8J+YPqtm9RvgtK6iFVubX05gC52tZ1Ze9pLmB1Rk4KnAObXD7AeC6Use2LjR6K3OFX/or55cCM6a2fSoPQhIFOC9g2nPyGHHEua1Yl/HRgGdObcXJSp/Ao5ZRgaeu2sBdUsfzd6cQrMnvRgXO13P+JUKuvO5nh4PsY5vR/fOk+aIDazckMddt9LY0Lrqeq1zT3VRRNs1F4aJWFavfvmlKv2w9hz+2FVzdetf8jAZzU3jg30t/nlORGo7L3IEHRUzEXVp/+9WI/ibAGsdi2ZTAsSK7KOOWCi+KErH8KBWOFdlFGbdUeFGUiOVHqXCsyC7KuO9O4SdkclFM9B/H7QAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/sign_loc.png\n// module id = 558\n// module chunks = 15 24 33 35","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\nimport PlateType from '../../../js/enum.js'\nimport { AjaxHttp } from '../../../js/ajaxHttp'\nimport { isArrayType, getImageUrl } from \"../../../js/utility.js\"\nexport default {\n  name: 'signhistory',\n  data() {\n    return {\n      rolelist: [],\n      selectIndex: -1,\n    };\n  },\n  computed: {\n    ...mapState([\n      'detail',\n      'detailSecond'\n    ]),\n  },\n  mounted() {\n    if (this.detail !== '' && this.detail.type === PlateType.SignIn) {\n      var map = new BMap.Map(\"historymap\");\n      this.map = map;\n      map.centerAndZoom(this.detail.address.point, 15);\n    } else {\n      var map = new BMap.Map(\"historymap\");\n      var self = this;\n      var geolocation = new BMap.Geolocation();\n      geolocation.getCurrentPosition(function(r) {\n        if (this.getStatus() == BMAP_STATUS_SUCCESS) {\n          map.centerAndZoom(r.point, 15);\n        } else {\n          self.$vux.toast.text('定位失败', 'bottom');\n        }\n      }, { enableHighAccuracy: true })\n      this.map = map;\n    }\n\n    this.getRoleDetail();\n    this.getSignDetail();\n  },\n  methods: {\n    getRoleDetail() {\n      var postParams = {};\n      if (this.detailSecond !== '' && this.detailSecond.type === 'teamsign') {\n        postParams = { 'date': this.detailSecond.date, type: 'role', 'department_id': this.detailSecond.departmentlist, 'role_id': this.detailSecond.rolelist };\n      } else {\n        postParams = { 'date': this.detailSecond.date, type: 'role' };\n      }\n      AjaxHttp('POST', 'm=sign&a=view', postParams, this, function(res, wself, success) {\n        if (success && isArrayType(res.list)) {\n          wself.rolelist = res.list;\n          if (wself.rolelist.length > 0) {\n            wself.selectIndex = 0;\n            var item = wself.rolelist[wself.selectIndex];\n            wself.map.clearOverlays();\n            wself.getSignDetail(item.role_id);\n          }\n        }\n      });\n    },\n    getSignDetail(role_id) {\n      AjaxHttp('POST', 'm=sign&a=view', { 'date': this.detailSecond.date, type: 'sign', 'role_id': role_id }, this, function(res, wself, success) {\n        if (success && isArrayType(res.list)) {\n          wself.addMarkerLabel(res.list);\n        }\n      });\n    },\n    addMarkerLabel(array) {\n      var pointArray = new Array();\n      for (var i = 0; i < array.length; i++) {\n        var item = array[i];\n        var myIcon = new BMap.Icon(require(\"../../../assets/sign_loc.png\"), new BMap.Size(300, 157));\n        var point = new BMap.Point(parseFloat(item.y), parseFloat(item.x));\n        pointArray[i] = point;\n        var marker2 = new BMap.Marker(point, { icon: myIcon }); // 创建标注\n        this.map.addOverlay(marker2);;\n      }\n      this.map.setViewport(pointArray);\n    },\n    getUserImage(url) {\n      return getImageUrl(url);\n    },\n    selectItem(item,index) {\n      this.selectIndex = index;\n      this.map.clearOverlays();\n      this.getSignDetail(item.role_id);\n    }\n  }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/office/page/SignHistory.vue","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\nexports.i(require(\"-!../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../css/mystyle.css\"), \"\");\n\n// module\nexports.push([module.id, \".historymap[data-v-87f2991c]{position:absolute;top:0;bottom:80px;left:0;right:0}.historyBottom[data-v-87f2991c]{position:absolute;height:80px;bottom:0;left:0;right:0}\", \"\", {\"version\":3,\"sources\":[\"/src/components/office/page/SignHistory.vue\"],\"names\":[],\"mappings\":\"AAEA,6BACE,kBAAmB,AACnB,MAAS,AACT,YAAa,AACb,OAAU,AACV,OAAU,CACX,AACD,gCACE,kBAAmB,AACnB,YAAa,AACb,SAAY,AACZ,OAAU,AACV,OAAU,CACX\",\"file\":\"SignHistory.vue\",\"sourcesContent\":[\"\\n@import url(\\\"../../../css/mystyle.css\\\");\\n.historymap[data-v-87f2991c] {\\n  position: absolute;\\n  top: 0px;\\n  bottom: 80px;\\n  left: 0px;\\n  right: 0px\\n}\\n.historyBottom[data-v-87f2991c] {\\n  position: absolute;\\n  height: 80px;\\n  bottom: 0px;\\n  left: 0px;\\n  right: 0px\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-87f2991c\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/office/page/SignHistory.vue\n// module id = 751\n// module chunks = 33","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-87f2991c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./SignHistory.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"7d844c75\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-87f2991c\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/office/page/SignHistory.vue\n// module id = 817\n// module chunks = 33","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"historymap\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"overflow\": \"hidden\"\n    },\n    attrs: {\n      \"id\": \"historymap\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"historyBottom flex-container\",\n    staticStyle: {\n      \"background\": \"white\",\n      \"overflow\": \"scroll\"\n    }\n  }, _vm._l((_vm.rolelist), function(item, index) {\n    return _c('div', {\n      key: index,\n      staticStyle: {\n        \"padding\": \"5px\",\n        \"width\": \"70px\",\n        \"height\": \"70px\",\n        \"text-align\": \"center\",\n        \"flex-shrink\": \"0\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.selectItem(item, index)\n        }\n      }\n    }, [_c('img', {\n      directives: [{\n        name: \"lazy\",\n        rawName: \"v-lazy\",\n        value: (_vm.getUserImage(item.thumb_path)),\n        expression: \"getUserImage(item.thumb_path)\"\n      }],\n      staticStyle: {\n        \"border-radius\": \"20px\"\n      },\n      attrs: {\n        \"height\": \"40\",\n        \"width\": \"40\"\n      }\n    }), _vm._v(\" \"), _c('p', {\n      staticStyle: {\n        \"font-size\": \"14px\",\n        \"margin-top\": \"-2px\"\n      },\n      style: ({\n        'color': _vm.selectIndex === index ? '#2385CE' : '000'\n      })\n    }, [_vm._v(_vm._s(item.full_name))])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-87f2991c\"}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/office/page/SignHistory.vue\n// module id = 945\n// module chunks = 33"],"sourceRoot":""}