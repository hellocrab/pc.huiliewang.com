webpackJsonp([38],{526:function(t,e,i){function a(t){i(779)}var o=i(0)(i(697),i(907),a,"data-v-1992c5cc",null);t.exports=o.exports},697:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(15),o=i.n(a),s=i(14),l=i(39),n=i.n(l),r=i(74),c=i.n(r),d=(i(3),i(10)),u=i(9),p=i(28);e.default={name:"taskhandle",components:{XInput:n.a,XTextarea:c.a},computed:o()({PlateType:function(){return d.a}},i.i(u.b)(["detail","taskDetail"])),data:function(){return{subject:"",description:"",priority:"普通",prioritydata:[{color:"#F6A45C",name:"低"},{color:"#3EBF8D",name:"普通"},{color:"#FE6369",name:"高"}],module_id:"",module_name:"",about_role:[]}},beforeDestroy:function(){p.a.$off("saveDone")},beforeRouteLeave:function(t,e,i){"relatelist"===t.name||"selectlist"===t.name?(this.$store.commit("updateDetail",{type:"taskhandle",subject:this.subject,description:this.description,priority:this.priority,module_id:this.module_id,module_name:this.module_name,about_role:this.about_role}),p.a.$on("selectedRelateItem",function(t){this.handleSelectedInfo(t)}.bind(this))):this.$store.commit("updateDetail",""),i()},beforeRouteEnter:function(t,e,i){"relatelist"===e.name&&p.a.$off("selectedRelateItem"),i()},mounted:function(){p.a.$on("saveDone",function(){this.saveInfos()}.bind(this)),""!==this.detail&&"taskhandle"===this.detail.type&&(this.subject=this.detail.subject,this.description=this.detail.description,this.priority=this.detail.priority,this.module_id=this.detail.module_id,this.module_name=this.detail.module_name,this.about_role=this.detail.about_role)},methods:{colorSelect:function(t){this.priority!==t&&(this.priority=t)},onRelateClick:function(){this.$router.push({name:"relatelist",params:{type:d.a.Customer,fromtype:"taskhandle",action:"select",section:"-1",row:"-1",addition:"0"}})},saveInfos:function(){if(""===this.subject)return void this.$vux.toast.text("请填写任务名称","top");for(var t="",e=0;e<this.about_role.length;e++)t=0===e?","+this.about_role[e].role_id+",":t+this.about_role[e].role_id+",";var a={subject:this.subject,description:this.description,priority:this.priority,module:""===this.module_id?"":"customer",module_id:this.module_id,about_role_id:t},o="";"edit"===this.$route.params.action?(o="m=task&a=edit",a.id=this.$route.params.id):"default"===this.$route.params.action&&(o="m=task&a=add",a.type_id=this.$route.params.id),i.i(s.b)("POST",o,a,this,function(t,e,i){i&&(e.$vux.toast.text(t.info,"top"),"edit"===e.$route.params.action&&(e.taskDetail.refresh=!0,e.$store.commit("updateTaskDetail",e.taskDetail)),e.$router.go(-1))})},handleSelectedInfo:function(t){t.type===d.a.Customer?(this.detail.module_id=t.item.id,this.detail.module_name=t.item.title,this.$store.commit("updateDetail",this.detail)):"4"===t.type&&(this.detail.about_role=t.data,this.$store.commit("updateDetail",this.detail))},enterSelectlist:function(){this.$router.push({name:"selectlist",params:{id:"-1",type:"taskhandle",selecttype:"4",section:"-1",row:"-1"}})}}}},713:function(t,e,i){e=t.exports=i(73)(!0),e.i(i(477),""),e.i(i(478),""),e.push([t.i,'.cell-line[data-v-1992c5cc]:after{content:" ";position:absolute;left:4%;bottom:0;width:96%;height:1px;border-top:1px solid #d9d9d9;color:#d9d9d9;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:15px}.weui-cell[data-v-1992c5cc]:before{display:none}.white-mark[data-v-1992c5cc]{background-color:#fff;position:absolute;width:28px;height:28px;top:1px;left:1px;border-radius:14px}',"",{version:3,sources:["/src/components/office/task/TaskHandle.vue"],names:[],mappings:"AAGA,kCACE,YAAa,AACb,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,UAAW,AACX,WAAY,AACZ,6BAA8B,AAC9B,cAAe,AACf,6BAA8B,AAC9B,qBAAsB,AACtB,6BAA+B,AAC/B,qBAAuB,AACvB,SAAW,CACZ,AACD,mCACE,YAAc,CACf,AACD,6BACE,sBAAwB,AACxB,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,QAAS,AACT,SAAU,AACV,kBAAoB,CACrB",file:"TaskHandle.vue",sourcesContent:['\n@import url("../../../css/mystyle.css");\n@import url("../../../css/weui.min.css");\n.cell-line[data-v-1992c5cc]:after {\n  content: " ";\n  position: absolute;\n  left: 4%;\n  bottom: 0;\n  width: 96%;\n  height: 1px;\n  border-top: 1px solid #D9D9D9;\n  color: #D9D9D9;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scaleY(0.5);\n  transform: scaleY(0.5);\n  left: 15px;\n}\n.weui-cell[data-v-1992c5cc]:before {\n  display: none;\n}\n.white-mark[data-v-1992c5cc] {\n  background-color: white;\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  top: 1px;\n  left: 1px;\n  border-radius: 14px;\n}\n\n'],sourceRoot:""}])},779:function(t,e,i){var a=i(713);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(476)("32df14e5",a,!0)},907:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-bottom":"0px",height:"100%","overflow-y":"scroll"},attrs:{id:"scroll_area"}},[i("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"0px"}},[i("x-input",{staticClass:"cell-line",attrs:{placeholder:"请输入",type:"text","text-align":"right"},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}},[i("div",{slot:"label"},[i("p",[t._v("名称"),i("span",{staticStyle:{color:"red"}},[t._v("*")])])])]),t._v(" "),i("p",{staticStyle:{padding:"5px 15px"}},[t._v("描述")]),t._v(" "),i("x-textarea",{staticClass:"cell-line",staticStyle:{padding:"0px 15px 10px 15px"},attrs:{"show-counter":!1,rows:1,autosize:"",placeholder:"请输入"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),i("div",{staticClass:"weui-cell cell-line"},[i("p",{staticStyle:{"margin-right":"10px"}},[t._v("优先级")]),t._v(" "),i("div",{staticClass:"flex-primary flex-container",staticStyle:{"flex-wrap":"wrap","flex-direction":"row-reverse"}},t._l(t.prioritydata,function(e,a){return i("dir",{key:a,staticStyle:{padding:"5px"},on:{click:function(i){t.colorSelect(e.name)}}},[i("div",{staticStyle:{width:"30px",height:"30px","border-radius":"15px",position:"relative"},style:{"background-color":e.color}},[t.priority===e.name?i("div",{staticClass:"white-mark"}):t._e()])])}))]),t._v(" "),i("div",{staticClass:"weui-cell weui-cell_access  cell-line",on:{click:function(e){t.onRelateClick()}}},[i("div",{staticClass:"weui-cell__bd"},[t._v("相关客户")]),t._v(" "),i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":"0"}},[""===t.module_name&&""===t.module_id?i("span",{staticStyle:{"vertical-align":"middle","font-size":"17px"}},[t._v("请选择")]):t._e(),t._v(" "),""!==t.module_name||""!==t.module_id?i("span",{staticStyle:{"vertical-align":"middle","font-size":"17px"}},[t._v(t._s(t.module_name))]):t._e()])]),t._v(" "),i("div",{staticClass:"weui-cell weui-cell_access  flex-initial",on:{click:function(e){t.enterSelectlist()}}},[i("div",{staticClass:"weui-cell__hd",staticStyle:{"margin-right":"10px","margin-top":"2px"}},[t._v("分配任务给")]),t._v(" "),i("div",{staticClass:"weui-cell__bd flex-container",staticStyle:{"flex-wrap":"wrap"}},t._l(t.about_role,function(t,e){return i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumb_path,expression:"item.thumb_path"}],key:e,staticStyle:{display:"block",margin:"5px","border-radius":"17px","flex-shrink":"0"},attrs:{width:"34",height:"34"},slot:"icon"})})),t._v(" "),i("div",{staticClass:"weui-cell__ft"})])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=38.64258f6678e5918b100f.js.map