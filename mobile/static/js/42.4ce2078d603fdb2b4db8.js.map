{"version":3,"sources":["webpack:///static/js/42.4ce2078d603fdb2b4db8.js","webpack:///./src/components/office/examine/ExamineOpinion.vue?53fa","webpack:///./src/components/office/examine/ExamineOpinion.vue","webpack:///./src/components/office/examine/ExamineOpinion.vue?7bc9","webpack:///./src/components/office/examine/ExamineOpinion.vue?823e","webpack:///./src/components/office/examine/ExamineOpinion.vue?af6b"],"names":["webpackJsonp","505","module","exports","__webpack_require__","injectStyle","ssrContext","Component","676","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1__js_ajaxHttp__","__WEBPACK_IMPORTED_MODULE_2__js_utility_js__","__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__","__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue___default","__WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue__","__WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue___default","__WEBPACK_IMPORTED_MODULE_5_vux_src_components_x_textarea_index_vue__","__WEBPACK_IMPORTED_MODULE_5_vux_src_components_x_textarea_index_vue___default","__WEBPACK_IMPORTED_MODULE_6_vux_src_components_selector_index_vue__","__WEBPACK_IMPORTED_MODULE_6_vux_src_components_selector_index_vue___default","__WEBPACK_IMPORTED_MODULE_7__js_Event_js__","__WEBPACK_IMPORTED_MODULE_8_vuex__","name","components","Group","a","Cell","XTextarea","Selector","data","opinion","examine_role_id","examine_name","examine_custom","examine_flow","examine_flow_data","key","beforeDestroy","$off","beforeRouteLeave","to","from","next","$on","this","handleSelectedInfo","bind","$store","commit","type","id","$route","params","action","beforeRouteEnter","computed","placeholder","i","mounted","saveInfos","detailView","getExamineRole","methods","res","wself","success","option","examine_role","role_id","full_name","postParams","is_agree","examine_status","$vux","toast","text","info","detail","refreshCheck","updateMainList","$router","go","examineList","examine_type","me_examine","refresh","examined","create","item","user_name","enterExamineList","can","push","selecttype","section","row","733","version","sources","names","mappings","file","sourceRoot","799","content","locals","927","render","_vm","_h","$createElement","_c","_self","staticStyle","background-color","height","attrs","max","show-counter","rows","cols","model","callback","$$v","expression","_v","options","direction","margin-left","slot","title","is-link","nativeOn","click","$event","_e","staticRenderFns"],"mappings":"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","file":"static/js/42.4ce2078d603fdb2b4db8.js","sourcesContent":["webpackJsonp([42],{\n\n/***/ 505:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(799)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(676),\n  /* template */\n  __webpack_require__(927),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-4d48962a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 676:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_ajaxHttp__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_utility_js__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vux_src_components_x_textarea_index_vue__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vux_src_components_x_textarea_index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_vux_src_components_x_textarea_index_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vux_src_components_selector_index_vue__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vux_src_components_selector_index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_vux_src_components_selector_index_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__js_Event_js__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_vuex__ = __webpack_require__(9);\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'examineopinion',\n  components: {\n    Group: __WEBPACK_IMPORTED_MODULE_3_vux_src_components_group_index_vue___default.a,\n    Cell: __WEBPACK_IMPORTED_MODULE_4_vux_src_components_cell_index_vue___default.a,\n    XTextarea: __WEBPACK_IMPORTED_MODULE_5_vux_src_components_x_textarea_index_vue___default.a,\n    Selector: __WEBPACK_IMPORTED_MODULE_6_vux_src_components_selector_index_vue___default.a\n  },\n  data: function data() {\n    return {\n      opinion: '',\n      examine_role_id: '',\n      examine_name: '',\n      examine_custom: true, //自定义审批 固定审批人默认\n      examine_flow: '1',\n      examine_flow_data: [{ 'key': '1', 'value': '下一审批人' }, { 'key': '2', 'value': '审批结束' }]\n    };\n  },\n  beforeDestroy: function beforeDestroy() {\n    __WEBPACK_IMPORTED_MODULE_7__js_Event_js__[\"a\" /* default */].$off(\"saveDone\");\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n\n    if (to.name === 'selectlist') {\n      __WEBPACK_IMPORTED_MODULE_7__js_Event_js__[\"a\" /* default */].$on('selectedRelateItem', function (data) {\n        this.handleSelectedInfo(data);\n      }.bind(this));\n\n      this.$store.commit('updateDetailView', {\n        type: 'examineopinion',\n        opinion: this.opinion,\n        examine_role_id: this.examine_role_id,\n        examine_name: this.examine_name,\n        examine_custom: this.examine_custom, //自定义审批 固定审批人默认\n        examine_flow: this.examine_flow,\n        id: this.$route.params.id,\n        action: this.$route.params.action\n      });\n    } else {\n      this.$store.commit('updateDetailView', '');\n    }\n    next();\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    if (from.name === 'selectlist') {\n      __WEBPACK_IMPORTED_MODULE_7__js_Event_js__[\"a\" /* default */].$off(\"selectedRelateItem\");\n    }\n    next();\n  },\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    placeholder: function placeholder() {\n      if (this.$route.params.action === '1') {\n        return '填写确定理由（非必填）';\n      } else {\n        return '填写驳回理由（非必填）';\n      }\n    }\n  }, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8_vuex__[\"b\" /* mapState */])(['detailView', //来记录跳转详情\n  'detail', 'examineList'])),\n  mounted: function mounted() {\n    __WEBPACK_IMPORTED_MODULE_7__js_Event_js__[\"a\" /* default */].$on('saveDone', function () {\n      this.saveInfos();\n    }.bind(this));\n    if (this.$route.params.action === '1') {\n      if (this.detailView !== '' && this.detailView.type === 'examineopinion' && this.detailView.action === '1' && this.detailView.id === this.$route.params.id) {\n        //有缓存\n        this.opinion = this.detailView.opinion;\n        this.examine_role_id = this.detailView.examine_role_id;\n        this.examine_name = this.detailView.examine_name;\n        this.examine_custom = this.detailView.examine_custom;\n        this.examine_flow = this.detailView.examine_flow;\n      } else {\n        this.getExamineRole();\n      }\n    }\n  },\n\n  methods: {\n    getExamineRole: function getExamineRole() {\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__js_ajaxHttp__[\"b\" /* AjaxHttp */])('POST', 'm=examine&a=examineStatus', {\n        type: this.$route.params.type,\n        id: this.$route.params.id\n      }, this, function (res, wself, success) {\n        if (success) {\n          if (res.option === '0') {\n            //自选\n            wself.examine_custom = false;\n          } else if (res.option === '1') {\n            //固定流程\n            wself.examine_custom = true;\n            if (res.examine_role.role_id) {\n              wself.examine_role_id = res.examine_role.role_id;\n              wself.examine_name = res.examine_role.full_name;\n            } else {\n              wself.examine_flow = '2';\n              wself.examine_flow_data = [{ 'key': '2', 'value': '审批结束' }];\n            }\n          }\n        }\n      });\n    },\n    saveInfos: function saveInfos() {\n      var postParams = {};\n      postParams.id = this.$route.params.id;\n      postParams.is_agree = this.$route.params.action;\n\n      if (postParams.is_agree === '1') {\n        //判断关联审批人的逻辑\n        if (this.examine_flow === '2') {\n          //审批结束\n          postParams.examine_status = '2';\n        } else {\n          if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__js_utility_js__[\"d\" /* isNullValue */])(this.examine_role_id)) {\n            this.$vux.toast.text('请选择下一审批人', 'top');\n            return;\n          } else {\n            postParams.examine_role_id = this.examine_role_id;\n          }\n        }\n      } else if (postParams.is_agree === '2') {\n        postParams.examine_status = '2';\n      }\n      postParams.opinion = this.opinion;\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__js_ajaxHttp__[\"b\" /* AjaxHttp */])('POST', 'm=examine&a=add_examine', postParams, this, function (res, wself, success) {\n        if (success) {\n          wself.$vux.toast.text(res.info, 'top');\n          wself.detail.refreshCheck = true;\n          wself.$store.commit('updateDetail', wself.detail.refreshCheck);\n          wself.updateMainList();\n          wself.$router.go(-1);\n        }\n      });\n    },\n    updateMainList: function updateMainList() {\n      // 审批完成 刷新审批列表\n      if (this.examineList.examine_type === 1) {\n        this.examineList.me_examine.refresh = true;\n      } else if (this.examineList.examine_type === 2) {\n        this.examineList.examined.refresh = true;\n      } else if (this.examineList.examine_type === 3) {\n        this.examineList.create.refresh = true;\n      }\n      this.$store.commit('updateExamineList', this.examineList);\n    },\n    handleSelectedInfo: function handleSelectedInfo(data) {\n      if (data.type === '3') {\n        //审批人选择\n        this.detailView.examine_name = data.item.user_name;\n        this.detailView.examine_role_id = data.item.role_id;\n        this.$store.commit('updateDetailView', this.detailView);\n      }\n    },\n    enterExamineList: function enterExamineList(can) {\n      if (can) {\n        this.$router.push({\n          name: 'selectlist',\n          params: {\n            id: '-1',\n            type: 'examine',\n            selecttype: '3',\n            section: '-1',\n            row: '-1'\n          }\n        });\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 733:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(73)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"ExamineOpinion.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 799:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(733);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(476)(\"0629ba78\", content, true);\n\n/***/ }),\n\n/***/ 927:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"background-color\": \"white\",\n      \"height\": \"100%\"\n    }\n  }, [_c('x-textarea', {\n    attrs: {\n      \"max\": 200,\n      \"placeholder\": _vm.placeholder,\n      \"show-counter\": false,\n      \"height\": 200,\n      \"rows\": 8,\n      \"cols\": 30\n    },\n    model: {\n      value: (_vm.opinion),\n      callback: function($$v) {\n        _vm.opinion = $$v\n      },\n      expression: \"opinion\"\n    }\n  }), _vm._v(\" \"), (this.$route.params.action === '1') ? _c('group', [_c('selector', {\n    attrs: {\n      \"options\": _vm.examine_flow_data,\n      \"direction\": \"rtl\"\n    },\n    model: {\n      value: (_vm.examine_flow),\n      callback: function($$v) {\n        _vm.examine_flow = $$v\n      },\n      expression: \"examine_flow\"\n    }\n  }, [_c('p', {\n    staticStyle: {\n      \"margin-left\": \"15px\"\n    },\n    slot: \"label\"\n  }, [_vm._v(\"审批流程\")])]), _vm._v(\" \"), (_vm.examine_flow === '1') ? _c('cell', {\n    attrs: {\n      \"title\": \"下一审批人\",\n      \"value\": _vm.examine_name,\n      \"is-link\": !_vm.examine_custom\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.enterExamineList(!_vm.examine_custom)\n      }\n    }\n  }) : _vm._e()], 1) : _vm._e()], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/42.4ce2078d603fdb2b4db8.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4d48962a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ExamineOpinion.vue\")\n}\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ExamineOpinion.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d48962a\\\"}!../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../node_modules/vux-loader/src/template-loader.js!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ExamineOpinion.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-4d48962a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/office/examine/ExamineOpinion.vue\n// module id = 505\n// module chunks = 42","\nimport { AjaxHttp } from '../../../js/ajaxHttp'\nimport { getYMDFormateTime, isArrayType, isNullValue } from \"../../../js/utility.js\"\nimport Group from 'vux/src/components/group/index.vue'\nimport Cell from 'vux/src/components/cell/index.vue'\nimport XTextarea from 'vux/src/components/x-textarea/index.vue'\nimport Selector from 'vux/src/components/selector/index.vue'\n\nimport event from '../../../js/Event.js'\nimport { mapState } from 'vuex'\n\nexport default {\nname: 'examineopinion',\ncomponents: {\nGroup,\nCell,\nXTextarea,\nSelector\n},\ndata() {\nreturn {\nopinion: '',\nexamine_role_id: '',\nexamine_name: '',\nexamine_custom: true, //自定义审批 固定审批人默认\nexamine_flow: '1',\nexamine_flow_data: [\n{ 'key': '1', 'value': '下一审批人' },\n{ 'key': '2', 'value': '审批结束' }\n],\n}\n},\nbeforeDestroy() {\nevent.$off(\"saveDone\");\n},\nbeforeRouteLeave(to, from, next) {\n\nif (to.name === 'selectlist') {\nevent.$on('selectedRelateItem', function(data) {\nthis.handleSelectedInfo(data);\n}.bind(this));\n\nthis.$store.commit('updateDetailView', {\ntype: 'examineopinion',\nopinion: this.opinion,\nexamine_role_id: this.examine_role_id,\nexamine_name: this.examine_name,\nexamine_custom: this.examine_custom, //自定义审批 固定审批人默认\nexamine_flow: this.examine_flow,\nid: this.$route.params.id,\naction: this.$route.params.action,\n});\n} else {\nthis.$store.commit('updateDetailView', '');\n}\nnext();\n},\nbeforeRouteEnter(to, from, next) {\nif (from.name === 'selectlist') {\nevent.$off(\"selectedRelateItem\");\n}\nnext();\n},\ncomputed: {\nplaceholder() {\nif (this.$route.params.action === '1') {\nreturn '填写确定理由（非必填）';\n} else {\nreturn '填写驳回理由（非必填）';\n}\n},\n...mapState([\n'detailView', //来记录跳转详情\n'detail',\n'examineList'\n]),\n},\nmounted() {\nevent.$on('saveDone', function() {\nthis.saveInfos();\n}.bind(this));\nif (this.$route.params.action === '1') {\nif (this.detailView !== '' && this.detailView.type === 'examineopinion' && this.detailView.action === '1' && this.detailView.id === this.$route.params.id) { //有缓存\nthis.opinion = this.detailView.opinion;\nthis.examine_role_id = this.detailView.examine_role_id;\nthis.examine_name = this.detailView.examine_name;\nthis.examine_custom = this.detailView.examine_custom; \nthis.examine_flow = this.detailView.examine_flow;\n} else {\nthis.getExamineRole();\n}\n}\n},\nmethods: {\ngetExamineRole() {\nAjaxHttp('POST', 'm=examine&a=examineStatus', {\ntype: this.$route.params.type,\nid: this.$route.params.id,\n}, this, function(res, wself, success) {\nif (success) {\nif (res.option === '0') { //自选\nwself.examine_custom = false;\n} else if (res.option === '1') { //固定流程\nwself.examine_custom = true;\nif (res.examine_role.role_id) {\nwself.examine_role_id = res.examine_role.role_id;\nwself.examine_name = res.examine_role.full_name;\n} else {\nwself.examine_flow = '2';\nwself.examine_flow_data = [\n{ 'key': '2', 'value': '审批结束' }\n];\n}\n\n}\n}\n});\n},\nsaveInfos() {\nvar postParams = {};\npostParams.id = this.$route.params.id;\npostParams.is_agree = this.$route.params.action;\n\nif (postParams.is_agree === '1') { //判断关联审批人的逻辑\nif (this.examine_flow === '2') { //审批结束\npostParams.examine_status = '2';\n} else {\nif (isNullValue(this.examine_role_id)) {\nthis.$vux.toast.text('请选择下一审批人', 'top');\nreturn;\n} else {\npostParams.examine_role_id = this.examine_role_id;\n}\n}\n} else if (postParams.is_agree === '2') {\npostParams.examine_status = '2';\n}\npostParams.opinion = this.opinion;\nAjaxHttp('POST', 'm=examine&a=add_examine', postParams, this, function(res, wself, success) {\nif (success) {\nwself.$vux.toast.text(res.info, 'top');\nwself.detail.refreshCheck = true;\nwself.$store.commit('updateDetail', wself.detail.refreshCheck);\nwself.updateMainList();\nwself.$router.go(-1);\n}\n});\n},\nupdateMainList() { // 审批完成 刷新审批列表\nif (this.examineList.examine_type === 1) {\nthis.examineList.me_examine.refresh = true;\n} else if (this.examineList.examine_type === 2) {\nthis.examineList.examined.refresh = true;\n} else if (this.examineList.examine_type === 3) {\nthis.examineList.create.refresh = true;\n}\nthis.$store.commit('updateExamineList', this.examineList);\n},\nhandleSelectedInfo(data) {\nif (data.type === '3') { //审批人选择\nthis.detailView.examine_name = data.item.user_name;\nthis.detailView.examine_role_id = data.item.role_id;\nthis.$store.commit('updateDetailView', this.detailView);\n}\n},\nenterExamineList(can) {\nif (can) {\nthis.$router.push({\nname: 'selectlist',\nparams: {\nid: '-1',\ntype: 'examine',\nselecttype: '3',\nsection: '-1',\nrow: '-1',\n}\n});\n}\n}\n}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/office/examine/ExamineOpinion.vue","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"ExamineOpinion.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4d48962a\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/office/examine/ExamineOpinion.vue\n// module id = 733\n// module chunks = 42","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4d48962a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ExamineOpinion.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"0629ba78\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4d48962a\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vux-loader/src/style-loader.js!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/office/examine/ExamineOpinion.vue\n// module id = 799\n// module chunks = 42","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"background-color\": \"white\",\n      \"height\": \"100%\"\n    }\n  }, [_c('x-textarea', {\n    attrs: {\n      \"max\": 200,\n      \"placeholder\": _vm.placeholder,\n      \"show-counter\": false,\n      \"height\": 200,\n      \"rows\": 8,\n      \"cols\": 30\n    },\n    model: {\n      value: (_vm.opinion),\n      callback: function($$v) {\n        _vm.opinion = $$v\n      },\n      expression: \"opinion\"\n    }\n  }), _vm._v(\" \"), (this.$route.params.action === '1') ? _c('group', [_c('selector', {\n    attrs: {\n      \"options\": _vm.examine_flow_data,\n      \"direction\": \"rtl\"\n    },\n    model: {\n      value: (_vm.examine_flow),\n      callback: function($$v) {\n        _vm.examine_flow = $$v\n      },\n      expression: \"examine_flow\"\n    }\n  }, [_c('p', {\n    staticStyle: {\n      \"margin-left\": \"15px\"\n    },\n    slot: \"label\"\n  }, [_vm._v(\"审批流程\")])]), _vm._v(\" \"), (_vm.examine_flow === '1') ? _c('cell', {\n    attrs: {\n      \"title\": \"下一审批人\",\n      \"value\": _vm.examine_name,\n      \"is-link\": !_vm.examine_custom\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.enterExamineList(!_vm.examine_custom)\n      }\n    }\n  }) : _vm._e()], 1) : _vm._e()], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-4d48962a\"}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/office/examine/ExamineOpinion.vue\n// module id = 927\n// module chunks = 42"],"sourceRoot":""}