webpackJsonp([34],{521:function(t,e,i){function l(t){i(815)}var s=i(0)(i(692),i(943),l,"data-v-7f898919",null);t.exports=s.exports},556:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAYAAACMo1E1AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTAvMTkvMTcVYCUmAAACn0lEQVRYhe2YvWsUQRiHn/tSPMxpERIJ2gSJCnYiiqXaWGmhxUssFD8K/wMLQVMJNiKm8aNJM6Dp1MI/IE2KkEKbfBhFSBAVAwFjMJexmFlubp2d293LWcj+4GB2fvPu+zCzM9y8Ja01naSUKgOjwG3gSMcAv74AT4AxEdlME1BN+eLzwDjQlxMMYBC4A2wBd9MEpIUbpQU2B6wC5ZSxGtgFHAJqwI20cCWtNUqpeuDFGngDnLZ9F4C3wI6UcJvAYRvTDywDB6P8vgAR+QmtmXsUgGsCI07fZeBEBrimhYomoAE8xMy8Fw647sJdS5kI4GKGsT7tBm52GNMG9wnzodaAAVqzsgz8AipdAsW1ZXMMWoYmZje35YrgLtmACvAcOGr7rwLfegDXxGySF8AQsAZcAb67uUrxc04pNQWcso91EVnfZjA31yIwDHwFDojIhutXY4PrmKWNNIBZcpRSI8Bx2/9eRGaduCHgLGZG5kVk2vGGgZM21zsRmbH9e2nNUtnm+pwIh9k9STvoHDBm28+AWcc7BjzG7O5JYNrxzgAPLMAEMOPJ5c2Z9hAGM6MN297peU9fglcD9iR4QaU95cEcppF+x7xmwAvFBZUFrpTQ7sYLKgvcP1cBl1cFXF4VcHlVwOVVAZdXBVxeFXB59d/A6YR2N15QWeDcW1m8FFEJeNWAF1QWODdJLeaF4FwvHpc6oU/uf/6XwLxtz8XGTWGqBgAfY95rYMW2FxPenQtuNWqIyAKw4BskIiuY+6rPWwKWPNYPWre2qNQWhNO0L/V+pVSJ7d/VGnPPjZa8hqceE4dbxxRuIk0CGz2Aiypa++zzmv0lw4mIVkqNY2obDUyptNfSwFPMMrfJNyOvgFvAhx5Dgaku3QPui8hf39wf9fiaOauSPrIAAAAASUVORK5CYII="},692:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i(15),s=i.n(l),a=i(14),n=i(3),r=i(20),c=i.n(r),o=i(49),h=i.n(o),d=i(9);e.default={name:"rangechoice",components:{Group:c.a,Cell:h.a},data:function(){return{itemlist:[],itemDetail:{},selectlist:[],allSelect:!1,allSelectList:[],allSelectImage:i(122)}},watch:{allSelect:function(t){this.allSelectImage=i(t?121:122)}},computed:s()({},i.i(d.b)(["userInfo","detailSecond"])),mounted:function(){this.getList("",this.userInfo.department_name)},methods:{getList:function(t,e){i.i(a.b)("POST","m=user&a=checkuser",{department_id:t},this,function(l,s,a){if(a){if(i.i(n.h)(l.data.sub_department_list)&&s.handleDepartmentList(l.data.sub_department_list),i.i(n.h)(l.data.role_list)&&s.handleRoleList(l.data.role_list),s.itemlist.length>0){s.allSelectList[s.itemlist.length-1].allSelect=s.allSelect}s.itemlist.push({name:e,id:t,sub_department_list:i.i(n.h)(l.data.sub_department_list)?l.data.sub_department_list:[],role_list:i.i(n.h)(l.data.role_list)?l.data.role_list:[]}),s.allSelectList.push({allSelect:!1}),s.allSelect=!1,s.itemDetail=s.itemlist[s.itemlist.length-1]}})},getUserImage:function(t){return i.i(n.c)(t)},currentSelect:function(t){return 1===this.itemlist.length||this.itemlist.length-1===t},handleDepartmentList:function(t){for(var e=0;e<t.length;e++){for(var i=t[e],l=!1,s=0;s<this.selectlist.length;s++){var a=this.selectlist[s];"department"===a.selecttype&&a.department_id===i.department_id&&(l=!0)}i.selected=l}},getSelectImage:function(t){return i(t?121:122)},handleRoleList:function(t){for(var e=0;e<t.length;e++){for(var i=t[e],l=!1,s=0;s<this.selectlist.length;s++){var a=this.selectlist[s];"role"===a.selecttype&&a.role_id===i.role_id&&(l=!0)}i.selected=l}},selectItem:function(t,e){for(var i=-1,l=0;l<this.selectlist.length;l++){var s=this.selectlist[l];"department"===t&&"department"===s.selecttype?s.department_id===e.department_id&&(i=l):"role"===t&&"role"===s.selecttype&&s.role_id===e.role_id&&(i=l)}-1===i?(e.selected=!0,e.selecttype=t,e.selectindex=this.itemlist.length-1,this.selectlist.push(e)):(e.selected=!1,this.selectlist.splice(i,1)),this.allSelect=this.getSelectedAllSeleteMark()},getSelectedAllSeleteMark:function(){for(var t=0;t<this.itemDetail.sub_department_list.length;t++){var e=this.itemDetail.sub_department_list[t];if(!e.selected)return!1}for(var t=0;t<this.itemDetail.role_list.length;t++){var e=this.itemDetail.role_list[t];if(!e.selected)return!1}return!0},getSubordinate:function(t){t.selected||(this.itemDetail={},this.getList(t.department_id,t.name))},navSelect:function(t){this.allSelectList.splice(t+1,this.allSelectList.length-t-1),this.allSelect=this.allSelectList[t].allSelect,console.log(this.allSelect),this.itemlist.splice(t+1,this.itemlist.length-t-1),this.itemDetail=this.itemlist[t]},handleAllSelect:function(){for(var t=[],e=0;e<this.selectlist.length;e++){var i=this.selectlist[e];i.selectindex===this.itemlist.length-1&&t.push(i)}for(var e=0;e<t.length;e++)for(var i=t[e],l=0;l<this.selectlist.length;l++){var s=this.selectlist[l];s===i&&this.selectlist.splice(l,1)}if(this.allSelect=!this.allSelect,this.allSelect){for(var e=0;e<this.itemDetail.sub_department_list.length;e++){var i=this.itemDetail.sub_department_list[e];i.selecttype="department",i.selected=!0,i.selectindex=this.itemlist.length-1,this.selectlist.push(i)}for(var e=0;e<this.itemDetail.role_list.length;e++){var i=this.itemDetail.role_list[e];i.selecttype="role",i.selected=!0,i.selectindex=this.itemlist.length-1,this.selectlist.push(i)}}else{for(var e=0;e<this.itemDetail.sub_department_list.length;e++){var i=this.itemDetail.sub_department_list[e];i.selecttype="department",i.selectindex=this.itemlist.length-1,i.selected=!1}for(var e=0;e<this.itemDetail.role_list.length;e++){var i=this.itemDetail.role_list[e];i.selecttype="role",i.selectindex=this.itemlist.length-1,i.selected=!1}}},deleteSelect:function(t){this.allSelect=!1;var e=this.selectlist[t];if("department"===e.selecttype)for(var i=0;i<this.itemDetail.sub_department_list.length;i++){var l=this.itemDetail.sub_department_list[i];e.department_id===l.department_id&&(l.selected=!1)}else if("role"===e.selecttype)for(var i=0;i<this.itemDetail.role_list.length;i++){var l=this.itemDetail.role_list[i];e.role_id===l.role_id&&(l.selected=!1)}this.selectlist.splice(t,1)},sure:function(){if(0===this.selectlist.length)return this.detailSecond.hasSelect=!1,this.$store.commit("updateDetailSecond",this.detailSecond),void this.$vux.toast.text("请先选择","top");for(var t=[],e=[],i=0,l=0,s=0,a=0;a<this.selectlist.length;a++){var n=this.selectlist[a];"department"===n.selecttype?(t.push(n.department_id),i+=1,l+=parseInt(n.role_count)):"role"===n.selecttype&&(e.push(n.role_id),s+=1)}this.detailSecond.departmentlist=t,this.detailSecond.rolelist=e,this.detailSecond.rangeName=i>0&&s>0?l+s+"人（含"+i+"个部门）":i>0&&0===s?i+"个部门":l+s+"人",this.detailSecond.refresh=!0,this.detailSecond.hasSelect=!0,this.$store.commit("updateDetailSecond",this.detailSecond),this.$router.go(-1)}}}},749:function(t,e,i){e=t.exports=i(73)(!0),e.i(i(477),""),e.push([t.i,".rangeBottom[data-v-7f898919]{position:absolute;height:44px;bottom:0;left:0;right:0;border-top:1px solid #dbdbdb;background-color:#fff}.itemBottom[data-v-7f898919]{position:relative;margin:0 5px;padding:0 13px;border:1px solid #2385ce;border-radius:12px;font-size:13px;color:#2385ce}.item_img[data-v-7f898919]{position:absolute;width:15px;height:15px;right:-7px;top:-7px;background-color:#fff}","",{version:3,sources:["/src/components/office/page/RangeChoice.vue"],names:[],mappings:"AAEA,8BACE,kBAAmB,AACnB,YAAa,AACb,SAAY,AACZ,OAAU,AACV,QAAW,AACX,6BAA8B,AAC9B,qBAAwB,CACzB,AACD,6BACE,kBAAmB,AACnB,aAAgB,AAChB,eAAkB,AAClB,yBAA0B,AAC1B,mBAAoB,AACpB,eAAgB,AAChB,aAAe,CAChB,AACD,2BACE,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,WAAY,AACZ,SAAU,AACV,qBAAwB,CACzB",file:"RangeChoice.vue",sourcesContent:['\n@import url("../../../css/mystyle.css");\n.rangeBottom[data-v-7f898919] {\n  position: absolute;\n  height: 44px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  border-top: 1px solid #DBDBDB;\n  background-color: white;\n}\n.itemBottom[data-v-7f898919] {\n  position: relative;\n  margin: 0px 5px;\n  padding: 0px 13px;\n  border: 1px solid #2385CE;\n  border-radius: 12px;\n  font-size: 13px;\n  color: #2385CE;\n}\n.item_img[data-v-7f898919] {\n  position: absolute;\n  width: 15px;\n  height: 15px;\n  right: -7px;\n  top: -7px;\n  background-color: white;\n}\n\n'],sourceRoot:""}])},815:function(t,e,i){var l=i(749);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);i(476)("0835832a",l,!0)},943:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticStyle:{"margin-bottom":"44px"}},[l("div",{staticClass:"flex-container ",staticStyle:{height:"50px",overflow:"scroll",padding:"0px 10px","background-color":"white"}},t._l(t.itemlist,function(e,s){return l("div",{key:s,staticClass:"flex-container flex-center",staticStyle:{height:"50px","flex-shrink":"0"},on:{click:function(e){t.navSelect(s)}}},[l("p",{style:{color:t.currentSelect(s)?"#000":"#2385CE"}},[t._v(t._s(e.name))]),t._v(" "),t.currentSelect(s)?t._e():l("img",{attrs:{src:i(133),height:"20",width:"20"}})])})),t._v(" "),"{}"!==JSON.stringify(t.itemDetail)?l("group",{attrs:{gutter:"5px"}},[l("cell",[l("div",{staticStyle:{width:"20px",height:"20px",padding:"5px","margin-right":"10px"},on:{click:function(e){t.handleAllSelect()}},slot:"icon"},[l("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.allSelectImage,expression:"allSelectImage"}],attrs:{height:"20",width:"20"}})]),t._v(" "),l("p",{staticStyle:{"font-size":"15px"},slot:"after-title"},[t._v("全选")])])],1):t._e(),t._v(" "),"{}"!==JSON.stringify(t.itemDetail)?l("group",{attrs:{gutter:"5px"}},t._l(t.itemDetail.sub_department_list,function(e,i){return l("cell",{key:i},[l("div",{staticStyle:{width:"20px",height:"20px",padding:"5px","margin-right":"10px"},on:{click:function(i){t.selectItem("department",e)}},slot:"icon"},[l("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getSelectImage(e.selected),expression:"getSelectImage(item.selected)"}],attrs:{height:"20",width:"20"}})]),t._v(" "),l("p",{staticStyle:{"font-size":"15px"},slot:"after-title"},[t._v(t._s(e.name))]),t._v(" "),"1"===e.is_sub?l("p",{staticStyle:{"font-size":"15px"},style:{color:e.selected?"#84C5E5":"#2385CE"},on:{click:function(i){t.getSubordinate(e)}},slot:"value"},[t._v("下级")]):t._e()])})):t._e(),t._v(" "),"{}"!==JSON.stringify(t.itemDetail)?l("group",{attrs:{gutter:"10px"}},t._l(t.itemDetail.role_list,function(e,i){return l("cell",{key:i},[l("div",{staticClass:"flex-container flex-center",slot:"icon"},[l("div",{staticStyle:{width:"20px",height:"20px",padding:"5px","margin-right":"5px"},on:{click:function(i){t.selectItem("role",e)}}},[l("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getSelectImage(e.selected),expression:"getSelectImage(item.selected)"}],attrs:{height:"20",width:"20"}})]),t._v(" "),l("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getUserImage(e.thumb_path),expression:"getUserImage(item.thumb_path)"}],staticStyle:{"margin-right":"5px","border-radius":"15px"},attrs:{height:"30",width:"30"}})]),t._v(" "),l("p",{staticStyle:{"font-size":"15px"},slot:"after-title"},[t._v(t._s(e.user_name))])])})):t._e()],1),t._v(" "),l("div",{staticClass:"rangeBottom flex-container flex-center"},[l("div",{staticClass:"flex-primary",staticStyle:{position:"relative",overflow:"scroll",height:"100%"}},[l("div",{staticClass:"flex-container flex-center",staticStyle:{height:"100%"}},t._l(this.selectlist,function(e,s){return l("div",{key:s,staticStyle:{"flex-shrink":"0"}},[l("div",{staticClass:"itemBottom",on:{click:function(e){t.deleteSelect(s)}}},[t._v(t._s("department"===e.selecttype?e.name:e.user_name)+"\n            "),l("img",{staticClass:"item_img",attrs:{src:i(556),height:"39",width:"39"}})])])}))]),t._v(" "),l("div",[l("p",{staticStyle:{padding:"0px 10px",color:"#2385CE"},on:{click:function(e){t.sure()}}},[t._v("确定")])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=34.56af1727ebb1f2c659f0.js.map