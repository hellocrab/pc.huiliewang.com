webpackJsonp([39],{513:function(t,e,i){function o(t){i(787)}var s=i(0)(i(684),i(915),o,"data-v-26e9ada8",null);t.exports=s.exports},684:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(15),s=i.n(o),a=i(14),n=i(3),l=i(76),d=i.n(l),c=i(39),r=i.n(c),u=i(38),m=i.n(u),h=i(77),p=i.n(h),v=i(28),f=i(10),x=i(9);e.default={name:"createschedule",components:{Selector:d.a,XInput:r.a,Datetime:m.a,Checker:p.a},computed:s()({PlateType:function(){return f.a}},i.i(x.b)(["detail","scheduleMain"])),data:function(){return{content:"",starttime:"",endtime:"",typedata:[{key:"customer",value:"客户"},{key:"contacts",value:"联系人"},{key:"leads",value:"线索"},{key:"business",value:"商机"},{key:"product",value:"产品"}],module:"",module_id:"",module_name:"",description:"",colordata:["#62a8ea","#46be8a","#57c7d4","#f2a654","#f96868","#526069","#926dde"],colorindex:-1}},mounted:function(){v.a.$on("saveDone",function(){this.saveInfos()}.bind(this)),""!==this.detail&&this.detail.type===f.a.Schedule&&(console.log(this.detail),this.$nextTick(function(){this.content=this.detail.content,this.starttime=this.detail.starttime,this.endtime=this.detail.endtime,this.module=this.detail.module,this.module_id=this.detail.module_id,this.module_name=this.detail.module_name,this.description=this.detail.description,this.colorindex=this.detail.colorindex}))},beforeDestroy:function(){v.a.$off("saveDone")},beforeRouteLeave:function(t,e,i){"relatelist"===t.name?(this.$store.commit("updateDetail",{type:f.a.Schedule,content:this.content,starttime:this.starttime,endtime:this.endtime,module:this.module,module_id:this.module_id,module_name:this.module_name,description:this.description,colorindex:this.colorindex}),v.a.$on("selectedRelateItem",function(t){this.handleSelectedInfo(t)}.bind(this))):"schedule"===t.name&&this.$store.commit("updateDetail",""),i()},beforeRouteEnter:function(t,e,i){"relatelist"===e.name&&v.a.$off("selectedRelateItem"),i()},methods:{saveInfos:function(){if(""===this.content)return void this.$vux.toast.text("请输入内容","top");if(""===this.starttime)return void this.$vux.toast.text("请选择开始时间","top");if(""===this.endtime)return void this.$vux.toast.text("请选择结束时间","top");var t="m=event&a=add",e={subject:this.content,start_date:i.i(n.m)(this.starttime),end_date:i.i(n.m)(this.endtime),module:this.module,module_id:this.module_id,color:-1!==this.colorindex?this.colordata[this.colorindex]:"",description:this.description};"edit"===this.$route.params.action&&(t="m=event&a=edit",e.id=this.detail.id),i.i(a.b)("POST",t,e,this,function(t,e,i){i&&(e.scheduleMain.refresh=!0,e.$store.commit("updateScheduleMain",e.scheduleMain),e.$vux.toast.text(t.info,"top"),e.$router.go(-1))})},onChange:function(t){this.module!==t&&(this.module_id="",this.module_name="")},onRelateClick:function(){if(""===this.module)return void this.$vux.toast.text("请先选择相关类型","top");var t=f.a.Default;"customer"===this.module?t=f.a.Customer:"contacts"===this.module?t=f.a.Contacts:"leads"===this.module?t=f.a.Leads:"business"===this.module?t=f.a.Business:"product"===this.module&&(t=f.a.Product),this.$router.push({name:"relatelist",params:{type:t,fromtype:f.a.Schedule,action:"select",section:"1",row:"3",addition:"0"}})},colorSelect:function(t){this.colorindex!==t?this.colorindex=t:this.colorindex=-1},handleSelectedInfo:function(t){this.detail.module_id=t.item.id,this.detail.module_name=t.item.title,this.$store.commit("updateDetail",this.detail)}}}},721:function(t,e,i){e=t.exports=i(73)(!0),e.i(i(478),""),e.i(i(477),""),e.push([t.i,".white-mark[data-v-26e9ada8]{background-color:#fff;position:absolute;width:28px;height:28px;top:1px;left:1px;border-radius:14px}","",{version:3,sources:["/src/components/office/page/CreateSchedule.vue"],names:[],mappings:"AAGA,6BACE,sBAAwB,AACxB,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,QAAS,AACT,SAAU,AACV,kBAAoB,CACrB",file:"CreateSchedule.vue",sourcesContent:['\n@import url("../../../css/weui.min.css");\n@import url("../../../css/mystyle.css");\n.white-mark[data-v-26e9ada8] {\n  background-color: white;\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  top: 1px;\n  left: 1px;\n  border-radius: 14px;\n}\n\n'],sourceRoot:""}])},787:function(t,e,i){var o=i(721);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(476)("0acd2340",o,!0)},915:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-bottom":"0px",height:"100%","overflow-y":"scroll"},attrs:{id:"scroll_area"}},[i("div",{staticClass:"weui-cells vux-no-group-title"},[i("x-input",{attrs:{placeholder:"请输入",type:"text","text-align":"right"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[i("div",{slot:"label"},[i("p",[t._v("内容"),i("span",{staticStyle:{color:"red"}},[t._v("*")])])])])],1),t._v(" "),i("div",{staticClass:"weui-cells vux-no-group-title",staticStyle:{"padding-bottom":"0px",overflow:"scroll"}},[i("datetime",{attrs:{format:"YYYY-MM-DD HH:mm","value-text-align":"right"},model:{value:t.starttime,callback:function(e){t.starttime=e},expression:"starttime"}},[i("p",{slot:"title"},[t._v("开始时间"),i("span",{staticStyle:{color:"red"}},[t._v("*")])])]),t._v(" "),i("datetime",{attrs:{format:"YYYY-MM-DD HH:mm","value-text-align":"right"},model:{value:t.endtime,callback:function(e){t.endtime=e},expression:"endtime"}},[i("p",{slot:"title"},[t._v("结束时间"),i("span",{staticStyle:{color:"red"}},[t._v("*")])])]),t._v(" "),i("selector",{attrs:{options:t.typedata,direction:"rtl"},on:{"on-change":t.onChange},model:{value:t.module,callback:function(e){t.module=e},expression:"module"}},[i("p",{staticStyle:{"margin-left":"15px"},slot:"label"},[t._v("相关类型")])]),t._v(" "),i("div",{staticClass:"weui-cell weui-cell_access",on:{click:function(e){t.onRelateClick()}}},[i("div",{staticClass:"weui-cell__bd"},[t._v("相关信息")]),t._v(" "),i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":"0"}},[""===t.module_id?i("span",{staticStyle:{"vertical-align":"middle","font-size":"17px"}},[t._v("请选择")]):t._e(),t._v(" "),""!==t.module_id?i("span",{staticStyle:{"vertical-align":"middle","font-size":"17px",color:"black"}},[t._v(t._s(t.module_name))]):t._e()])]),t._v(" "),i("x-input",{attrs:{placeholder:"请输入",type:"text","text-align":"right"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}},[i("div",{slot:"label"},[i("p",[t._v("描述")])])]),t._v(" "),i("div",{staticClass:"weui-cell"},[i("p",{staticStyle:{"margin-right":"10px"}},[t._v("标记")]),t._v(" "),i("div",{staticClass:"flex-primary flex-container",staticStyle:{"flex-wrap":"wrap"}},t._l(t.colordata,function(e,o){return i("dir",{key:o,staticStyle:{padding:"5px"},on:{click:function(e){t.colorSelect(o)}}},[i("div",{staticStyle:{width:"30px",height:"30px","border-radius":"15px",position:"relative"},style:{"background-color":e}},[t.colorindex===o?i("div",{staticClass:"white-mark"}):t._e()])])}))])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=39.5aa39048be5078bbd4c9.js.map