webpackJsonp([36],{500:function(e,t,i){function s(e){i(826)}var n=i(0)(i(669),i(954),s,"data-v-c04fbfc2",null);e.exports=n.exports},604:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8xOS8xNxxtGzYAAAAfdEVYdFNvZnR3YXJlAE1hY3JvbWVkaWEgRmlyZXdvcmtzIDi1aNJ4AAADLUlEQVRYhbWYW24TSRSGv1MYR+GmZBYwghVM5c0yAhqkBD+NDCswKxjPCkgWgAIrCBGvSFwkJF/ExNZMOnmCChtI2ABykDLJmEkfHtpFOrETd5P2ebP9H9dX/6k6fdSiqkw6WhsOoIryW2ToVkq2c1JjJrV4O3QAvFxzaEQd5RWwaCL+aq67941N92tSJ5NwpB065svWL1JTWBkSKV9EuDtftp8mBuJhAKvKGsLMSFECJvfSNNdjqxFQWDkVItb84t3K1ZGOcwTW0vjbIYa6CMsp0hThYe6l6W45VJnp77F9phvHY6mQKwXw3x4A9QwQQI7X119DFEH5I2t+rqUZwMwpfMiQppHhXu5npBV+FGAX5GpKjl5kZDb30giigtRTJ6q8qZTsZBrawJUeyLVx2shwo1KyO7k2tMbm4MAigLiztAAoq5WS3YEJtPgBzHUTsT1O692AHK9v05+RPsjhiIfciVB45iFyA2mHjvtly7vQQYGnIgRnQ+jnqUsswlE5zw3iH/kARagJ45uZGqkF1vYAKiV7fpAkRDt0o+eO4VjyE1rHHZ3nU0F+tOxENBPfNX8GQnVroWwXIS5JYO2Pn4ZuTXKXg89W4XcFd79s346AWxGojWVAP09dEhtY22uFjoXEGkMgSUE7dDZSlkW4Q9wYVGFblMXiFd4e7DMrh6yMO5gDjF1BgvmyPbW3iKoOudAK3WOIT/XIzSXys0L44elkFFobx10Y1HpYmWnxpFjqHuLkho/pfGlaG65KNGbGzBgCj+bL9vk4CIBCp+v4dpEa8aCbU+huZKQ63aeTBgKg0C9SRVPd/9QQggT/TuEqJZsKAsCgzOXHoFuRETv1P+7hnKWxmQ4CwAjs5APBavGyBPsH7Ny+HTvh23cqkIvTvAb9eg6CXYQHRNRE6D0Isjnho9Dfp6cqSyI8yc7AavGy1A/26FVuxQt3XDYnfJiFslWBZZQXGfK6keGuDFyo3LT+1cPIZpUmjvrIuhOFP0X08ehZU7+i8kqEpwpbkUH9zk/rlplAmv98ZOFm/Cet0Elxmplv+1QVrntRZFi7cKhdRRBBff0bmz9XhlHxHVmjlhnq7u2eAAAAAElFTkSuQmCC"},669:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(8),n=i.n(s),o=i(15),a=i.n(o),r=i(20),l=i.n(r),u=i(49),p=i.n(u),c=i(39),f=i.n(c),d=i(76),h=i.n(d),m=i(74),A=i.n(m),I=i(14),v=i(3),g=i(35),x=i.n(g),w=i(36),y=i.n(w),k=i(28),b=i(9);t.default={name:"user",components:{Group:l.a,Cell:p.a,ListCell:x.a,XInput:f.a,Selector:h.a,XTextarea:A.a},data:function(){return{userInfo:{},copyUserInfo:{},is_edit:!1,previewerlist:[]}},computed:a()({},i.i(b.b)({userMInfo:function(e){return e.userInfo}}),{show:function(){return"{}"!==n()(this.userInfo)}}),mounted:function(){this.getInfo()},beforeRouteLeave:function(e,t,i){this.updateEditInfo(),i()},methods:{getInfo:function(){i.i(I.b)("POST","m=user&a=view",{id:this.$route.params.id},this,function(e,t,s){s&&(1===e.is_edit?t.is_edit=!0:t.is_edit=!1,e.data.thumb_path=i.i(v.c)(e.data.thumb_path),t.previewerlist=[{src:i.i(v.c)(e.data.img)}],"0"===e.data.sex&&(e.data.sex=""),t.userInfo=e.data,t.copyUserInfo=i.i(v.b)(t.userInfo))})},updateEditInfo:function(){this.is_edit&&(this.copyUserInfo.sex===this.userInfo.sex&&this.copyUserInfo.telephone===this.userInfo.telephone&&this.copyUserInfo.email===this.userInfo.email&&this.copyUserInfo.address===this.userInfo.address||i.i(I.a)("POST","m=user&a=edit",{id:this.$route.params.id,sex:this.userInfo.sex,telephone:this.userInfo.telephone,email:this.userInfo.email,address:this.userInfo.address},this,function(e,t,i){}))},callPhone:function(){i.i(v.d)(this.userInfo.telephone)||i.i(v.e)(this.userInfo.telephone)},previewerUserImage:function(){k.a.$emit("previewerAction",{list:this.previewerlist,index:0})},editUserImage:function(){y()(fileElem)&&y()(fileElem).click()},uploadimg:function(e){for(var t=(window.URL||window.webkitURL||window.mozURL,e.target.files),s=0,n=t.length;s<n;++s){var o=t[s],a=this;i.i(v.f)(o,.3,function(e){var t=new FormData;t.append("img",i.i(v.g)(e),o.name),t.append("id",a.$route.params.id),i.i(I.c)("POST","m=user&a=edit",t,a,function(e,t,s){s&&(t.$vux.toast.text(e.info,"top"),t.userMInfo.img=i.i(v.c)(e.data),t.userInfo.thumb_path=i.i(v.c)(e.data),t.$store.dispatch("setUserInfo",t.userMInfo))})})}}}}},760:function(e,t,i){t=e.exports=i(73)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"UserPage.vue",sourceRoot:""}])},826:function(e,t,i){var s=i(760);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i(476)("527881b9",s,!0)},954:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{height:"100%"}},[e.show?s("group",{attrs:{gutter:"0"}},[s("list-cell",{staticStyle:{padding:"10px 15px"},attrs:{title:"头像",showdetail:!1,showArrow:e.is_edit,detailColor:"#9F9F9F",showCenter:!0},nativeOn:{click:function(t){e.editUserImage()}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.userInfo.thumb_path,expression:"userInfo.thumb_path"}],staticClass:"previewer-demo-img",staticStyle:{display:"block","margin-right":"20px"},attrs:{width:"40"},on:{click:function(t){t.stopPropagation(),e.previewerUserImage()}},slot:"value"})]),e._v(" "),s("cell",{attrs:{title:"部门",value:e.userInfo.department_name}}),e._v(" "),s("cell",{attrs:{title:"岗位",value:e.userInfo.role_name}}),e._v(" "),s("selector",{attrs:{title:"性别",options:[{key:"1",value:"男"},{key:"2",value:"女"}],direction:"rtl",readonly:!e.is_edit},model:{value:e.userInfo.sex,callback:function(t){e.userInfo.sex=t},expression:"userInfo.sex"}}),e._v(" "),s("x-input",{attrs:{title:"电话","is-type":"china-mobile","text-align":"right","show-clear":!1,readonly:!e.is_edit},model:{value:e.userInfo.telephone,callback:function(t){e.userInfo.telephone=t},expression:"userInfo.telephone"}},[""!==e.userInfo.telephone?s("img",{staticStyle:{display:"block",width:"15px",height:"15px",padding:"5px"},attrs:{src:i(604)},on:{click:function(t){e.callPhone()}},slot:"right"}):e._e()]),e._v(" "),s("x-input",{attrs:{title:"邮箱","is-type":"email","text-align":"right",readonly:!e.is_edit},model:{value:e.userInfo.email,callback:function(t){e.userInfo.email=t},expression:"userInfo.email"}}),e._v(" "),s("x-textarea",{attrs:{title:"地址","show-counter":!1,rows:1,autosize:"",readonly:!e.is_edit},model:{value:e.userInfo.address,callback:function(t){e.userInfo.address=t},expression:"userInfo.address"}})],1):e._e(),e._v(" "),s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"fileElem",accept:"image/*"},on:{change:e.uploadimg}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=36.51db81cebf1e983bb234.js.map