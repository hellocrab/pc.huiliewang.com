webpackJsonp([49],{482:function(e,t,a){function i(e){a(776)}var n=a(0)(a(649),a(904),i,"data-v-12ddaf55",null);e.exports=n.exports},649:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),n=a.n(i),s=a(15),o=a.n(s),l=a(76),r=a.n(l),c=a(39),d=a.n(c),f=a(20),p=a.n(f),m=a(38),u=a.n(m),v=a(77),A=a.n(v),h=a(78),_=a.n(h),y=a(74),x=a.n(y),b=a(52),g=a.n(b),C=a(51),B=a.n(C),k=a(21),S=a(9),$=a(36),w=(a.n($),a(28)),D=a(14),I=a(10),F=a(140),R=a(3);t.default={name:"financeadd",components:{XTextarea:x.a,XAddress:B.a,ChinaAddressV3Data:g.a,Selector:r.a,XInput:d.a,Group:p.a,Datetime:u.a,Checker:A.a,CheckerItem:_.a},data:function(){return{addressData:g.a,detail:{},list:[]}},created:function(){},beforeDestroy:function(){w.a.$off("saveDone")},beforeRouteLeave:function(e,t,a){"relatelist"===e.name||"selectlist"===e.name?("relatelist"===e.name?w.a.$on("selectedRelateItem",function(e){this.handleRelatedInfo(e)}.bind(this)):"selectlist"===e.name&&w.a.$on("selectedRelateItem",function(e){this.handleSelectedInfo(e)}.bind(this)),this.addFinanceInfos.type="financeadd"+this.$route.params.type,this.addFinanceInfos.list=this.list,this.addFinanceInfos.detail=this.detail,this.$store.commit("updateAddFinanceInfos",this.addFinanceInfos)):this.$store.commit("updateAddFinanceInfos",{}),a()},beforeRouteEnter:function(e,t,a){"relatelist"!==t.name&&"selectlist"!==e.name||w.a.$off("selectedRelateItem"),a()},mounted:function(){this.addFinanceInfos.type==="financeadd"+this.$route.params.type?(this.detail=this.addFinanceInfos.detail,this.list=this.addFinanceInfos.list):this.getHandleInfo(),w.a.$on("saveDone",function(){this.saveInfos()}.bind(this))},computed:o()({},a.i(S.b)(["userInfo","addFinanceInfos","crmShowDetail","crmListInfo"])),methods:{getHandleInfo:function(){this.$route.params.type===I.a.FinanceReceivables?"default"===this.$route.params.action?a.i(D.b)("POST","m=finance&a=getCode",{t:"receivables"},this,function(e,t,i){i&&(t.list=a.i(F.a)(e.data,t.userInfo))}):"edit"===this.$route.params.action&&(this.list=a.i(F.b)(this.crmShowDetail.resData.data)):this.$route.params.type===I.a.FinanceReceivingorder&&a.i(D.b)("POST","m=finance&a=getCode",{t:"receivingorder"},this,function(e,t,i){if(i){for(var n=[],s=0;s<e.list.length;s++){var o=e.list[s];n.push({key:o.account_id,value:o.open_bank})}t.detail=e.list,"default"===t.$route.params.action?t.list=a.i(F.c)(n,t.userInfo):"edit"===t.$route.params.action&&(t.list=a.i(F.d)(n,t.crmShowDetail.resData.data))}})},saveInfos:function(){for(var e=!0,t={},i=0;i<this.list.length;i++){var s=this.list[i],o="";if(o="text"===s.form_type||"number"===s.form_type||"floatnumber"===s.form_type||"email"===s.form_type||"mobile"===s.form_type||"textarea"===s.form_type?s.disabled?s.fieldvalue:s.content:s.fieldvalue,"1"===s.is_null&&a.i(R.l)(o)){this.$vux.toast.text(s.name+"是必填项","top"),e=!1;break}if("datetime"!==s.form_type||a.i(R.l)(o))if("address"===s.form_type){var l=a.i(k.a)(o,g.a),r=""===l?[]:l.split(" ");a.i(R.l)(r)&&(r=r.concat(["","",""])),r.push(a.i(R.l)(s.addition)?"":s.addition),o=n()(r)}else"checkbox"===s.form_type&&(o=n()(o));else"YYYY-MM-DD HH:mm"===s.data?o=a.i(R.m)(o):"YYYY-MM-DD"===s.data&&(o=a.i(R.n)(o));t[s.field]=o}e&&this.requestHandle(t)},requestHandle:function(e){var t="";"default"===this.$route.params.action?t="m=finance&a=add":"edit"===this.$route.params.action&&(t="m=finance&a=edit",e.id=this.$route.params.id),this.$route.params.type===I.a.FinanceReceivables?e.t="receivables":this.$route.params.type===I.a.FinanceReceivingorder&&(e.t="receivingorder"),a.i(D.b)("POST",t,e,this,function(e,t,a){a&&("edit"===t.$route.params.action&&(t.crmShowDetail.refresh=!0,t.$store.commit("updateCrmShowDetail",t.crmShowDetail)),"default"===t.$route.params.action&&(t.crmListInfo.topRefresh=!0,t.$store.commit("updateCrmListInfo",t.crmListInfo)),t.$vux.toast.text(e.info,"top"),t.$router.go(-1))})},onRelateClick:function(e,t){"contract"===e.form_type?this.$router.push({name:"relatelist",params:{type:I.a.Contract,fromtype:this.$route.params.type,action:"select",section:"0",row:t.toString(),addition:"-1"}}):"customer"===e.form_type?this.$route.params.type===I.a.FinanceReceivables&&""===e.fieldvalue&&this.$vux.toast.text("请选择相关合同进行客户的关联","top"):"receivables"===e.form_type?this.$router.push({name:"relatelist",params:{type:I.a.FinanceReceivables,fromtype:this.$route.params.type,action:"select",section:"0",row:t.toString(),addition:"-1"}}):"user"===e.form_type&&this.$router.push({name:"selectlist",params:{id:"-1",type:this.$route.params.type,selecttype:"2",section:"-1",row:t.toString()}})},handleRelatedInfo:function(e){if(e.type===I.a.Contract){var t=this.list[0];t.content=e.item.title,t.fieldvalue=e.item.id,this.list[0]=t;var a=this.list[1];a.content=e.item.customer_name,a.fieldvalue=e.item.customer_id,this.list[1]=a}else if(e.type===I.a.FinanceReceivables){var t=this.list[0];t.content=e.item.name,t.fieldvalue=e.item.receivables_id,this.list[0]=t}},handleSelectedInfo:function(e){if("2"===e.type){var t=parseInt(e.row),a=this.list[t];a.content=e.item.user_name,a.fieldvalue=e.item.role_id,this.list[t]=a}},onChange:function(e){if(this.$route.params.type===I.a.FinanceReceivingorder)for(var t=0;t<this.detail.length;t++){var a=this.detail[t];if(a.account_id===e){var i=this.list[2];i.fieldvalue=a.bank_account,i.content=a.bank_account,this.list[2]=i;var n=this.list[3];n.fieldvalue=a.company,n.content=a.company,this.list[3]=n}}}}}},710:function(e,t,a){t=e.exports=a(73)(!0),t.i(a(478),""),t.push([e.i,'.cell-line[data-v-12ddaf55]:before{content:" ";position:absolute;left:0;top:0;width:100%;height:1px;border-top:1px solid #d9d9d9;color:#d9d9d9;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:15px}.demo5-item[data-v-12ddaf55]{width:100px;height:26px;line-height:26px;text-align:center;border-radius:3px;border:1px solid #ccc;background-color:#fff;margin-right:6px}.demo5-item-selected[data-v-12ddaf55]{background:#fff url('+a(479)+") no-repeat 100% 100%;border-color:#ff4a00}.cell-pad[data-v-12ddaf55]{padding:5px 15px}.cell-titles-wk[data-v-12ddaf55]{padding:5px 15px;font-size:15px;background-color:#f1f1f1}.weui-cell[data-v-12ddaf55]:before{display:none}","",{version:3,sources:["/src/components/crm/finance/FinanceAdd.vue"],names:[],mappings:"AAEA,mCACE,YAAa,AACb,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,WAAY,AACZ,WAAY,AACZ,6BAA8B,AAC9B,cAAe,AACf,6BAA8B,AAC9B,qBAAsB,AACtB,6BAA+B,AAC/B,qBAAuB,AACvB,SAAW,CACZ,AACD,6BACE,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,kBAAmB,AACnB,sBAAuB,AACvB,sBAAuB,AACvB,gBAAkB,CACnB,AACD,sCACE,kEAA2E,AAC3E,oBAAsB,CACvB,AACD,2BACE,gBAAkB,CACnB,AACD,iCACE,iBAAkB,AAClB,eAAgB,AAChB,wBAA0B,CAC3B,AACD,mCACE,YAAc,CACf",file:"FinanceAdd.vue",sourcesContent:['\n@import url("../../../css/weui.min.css");\n.cell-line[data-v-12ddaf55]:before {\n  content: " ";\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 1px;\n  border-top: 1px solid #D9D9D9;\n  color: #D9D9D9;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scaleY(0.5);\n  transform: scaleY(0.5);\n  left: 15px;\n}\n.demo5-item[data-v-12ddaf55] {\n  width: 100px;\n  height: 26px;\n  line-height: 26px;\n  text-align: center;\n  border-radius: 3px;\n  border: 1px solid #ccc;\n  background-color: #fff;\n  margin-right: 6px;\n}\n.demo5-item-selected[data-v-12ddaf55] {\n  background: #ffffff url(../../../assets/active.png) no-repeat right bottom;\n  border-color: #ff4a00;\n}\n.cell-pad[data-v-12ddaf55] {\n  padding: 5px 15px;\n}\n.cell-titles-wk[data-v-12ddaf55] {\n  padding: 5px 15px;\n  font-size: 15px;\n  background-color: #F1F1F1;\n}\n.weui-cell[data-v-12ddaf55]:before {\n  display: none;\n}\n\n'],sourceRoot:""}])},776:function(e,t,a){var i=a(710);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(476)("6c2d2050",i,!0)},904:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-y":"scroll"},attrs:{id:"scroll_area"}},[a("div",{staticClass:"weui-cells vux-no-group-title",staticStyle:{"margin-top":"0px","padding-bottom":"0px"}},e._l(e.list,function(t,i){return a("div",{staticClass:"cell-line",staticStyle:{position:"relative"}},["text"===t.form_type||"number"===t.form_type||"floatnumber"===t.form_type||"email"===t.form_type||"mobile"===t.form_type?a("x-input",{attrs:{placeholder:"请输入",type:"text","text-align":"right",disabled:t.disabled},model:{value:t.content,callback:function(e){t.content=e},expression:"item.content"}},[a("div",{slot:"label"},[a("p",[e._v(e._s(t.name)),"1"===t.is_null?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()])])]):e._e(),e._v(" "),"select"===t.form_type?a("selector",{attrs:{options:t.data,direction:"rtl"},on:{"on-change":e.onChange},model:{value:t.fieldvalue,callback:function(e){t.fieldvalue=e},expression:"item.fieldvalue"}},[a("p",{staticStyle:{"margin-left":"15px"},slot:"label"},[e._v(e._s(t.name)),"1"===t.is_null?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()])]):e._e(),e._v(" "),"checkbox"===t.form_type||"textarea"===t.form_type?a("p",{staticStyle:{padding:"5px 15px"}},[e._v(e._s(t.name)),"1"===t.is_null?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]):e._e(),e._v(" "),"checkbox"===t.form_type?a("checker",{staticStyle:{padding:"5px 15px"},attrs:{type:"checkbox","default-item-class":"demo5-item","selected-item-class":"demo5-item-selected"},model:{value:t.fieldvalue,callback:function(e){t.fieldvalue=e},expression:"item.fieldvalue"}},e._l(t.data,function(t){return a("checker-item",{key:t.key,staticStyle:{margin:"5px"},attrs:{value:t.key}},[e._v(e._s(t.value))])})):e._e(),e._v(" "),"textarea"===t.form_type?a("x-textarea",{staticStyle:{padding:"0px 15px 10px 15px"},attrs:{"show-counter":!1,rows:1,autosize:"",placeholder:"请输入"},model:{value:t.content,callback:function(e){t.content=e},expression:"item.content"}}):e._e(),e._v(" "),"datetime"===t.form_type?a("datetime",{attrs:{format:t.data,"value-text-align":"right"},model:{value:t.fieldvalue,callback:function(e){t.fieldvalue=e},expression:"item.fieldvalue"}},[a("p",{slot:"title"},[e._v(e._s(t.name)),"1"===t.is_null?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()])]):e._e(),e._v(" "),"address"===t.form_type?a("x-address",{attrs:{title:t.name,list:e.addressData,"raw-value":"","value-text-align":"right"},scopedSlots:e._u([{key:"title",fn:function(i){return[a("span",{class:i.labelClass,staticStyle:{height:"24px"},style:i.labelStyle},[a("p",[e._v(e._s(t.name)),"1"===t.is_null?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()])])]}}]),model:{value:t.fieldvalue,callback:function(e){t.fieldvalue=e},expression:"item.fieldvalue"}}):e._e(),e._v(" "),"address"===t.form_type?a("div",{staticClass:"cell-line",staticStyle:{position:"relative"}},[a("x-input",{attrs:{placeholder:"街道信息",type:"text","text-align":"left"},model:{value:t.addition,callback:function(e){t.addition=e},expression:"item.addition"}})],1):e._e(),e._v(" "),"customer"===t.form_type||"user"===t.form_type||"contacts"===t.form_type||"business"===t.form_type||"contract"===t.form_type||"receivables"===t.form_type?a("div",{staticClass:"weui-cell weui-cell_access",on:{click:function(a){e.onRelateClick(t,i)}}},[a("div",{staticClass:"weui-cell__bd"},[e._v(e._s(t.name)),"1"===t.is_null?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]),e._v(" "),a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":"0"}},[""===t.content?a("span",{staticStyle:{"vertical-align":"middle","font-size":"17px"}},[e._v("请选择")]):e._e(),e._v(" "),""!==t.content?a("span",{staticStyle:{"vertical-align":"middle","font-size":"17px",color:"black"}},[e._v(e._s(t.content))]):e._e()])]):e._e()],1)}))])},staticRenderFns:[]}}});
//# sourceMappingURL=49.d6d2c30f40b7d05e88b6.js.map